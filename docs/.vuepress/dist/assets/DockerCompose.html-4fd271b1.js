import{_ as c,M as o,p as i,q as u,R as s,N as a,V as t,t as n,a1 as p}from"./framework-5866ffd3.js";const r="/FullStackNotes/assets/1674051402479-a53d1fd0-625c-4206-b98c-8f11881811c2-695ed98a.png",d="/FullStackNotes/assets/1674049445308-936302c3-c46b-4b8e-855e-bcf2ac3387fe-64057253.png",k="/FullStackNotes/assets/1674049718897-09c08775-dd51-49b9-bb0a-2e3da4e40b45-bdff5947.png",m="/FullStackNotes/assets/1674049772013-8c2cde2c-b7a4-4e46-915d-ebf851701bf9-21be2540.png",v="/FullStackNotes/assets/1674049811208-ac21384b-571f-4b8d-b9d5-a29b57a9d20b-99f1dfa0.png",b={},g=s("h1",{id:"ç›®å½•",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ç›®å½•","aria-hidden":"true"},"#"),n(" ç›®å½•")],-1),h={class:"table-of-contents"},y=p(`<h1 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> Docker-Compose</h1><p>Docker Composeå¯ä»¥åŸºäºComposeæ–‡ä»¶å¸®æˆ‘ä»¬å¿«é€Ÿçš„éƒ¨ç½²åˆ†å¸ƒå¼åº”ç”¨ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ä¸€ä¸ªä¸ªåˆ›å»ºå’Œè¿è¡Œå®¹å™¨ï¼</p><h2 id="åˆè¯†dockercompose" tabindex="-1"><a class="header-anchor" href="#åˆè¯†dockercompose" aria-hidden="true">#</a> åˆè¯†DockerCompose</h2><p>Composeæ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé€šè¿‡æŒ‡ä»¤å®šä¹‰é›†ç¾¤ä¸­çš„æ¯ä¸ªå®¹å™¨å¦‚ä½•è¿è¡Œã€‚</p><p>å°† <code>docker run</code> ä¸­çš„æ‰€æœ‰å‚æ•°è½¬æ¢ä¸º <code>Compose</code> å½¢å¼</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>version<span class="token operator">:</span> <span class="token string">&quot;3.8&quot;</span>

services<span class="token operator">:</span>
	mysql<span class="token operator">:</span> <span class="token comment">// å¯¹åº” --name</span>
		image<span class="token operator">:</span> mysql<span class="token operator">:</span><span class="token number">5.7</span>.<span class="token number">25</span> <span class="token comment">// å¯¹åº”é•œåƒåç§°</span>
		environment<span class="token operator">:</span> <span class="token comment">// å¯¹åº” -e</span>
			MYSQL_ROOT_PASSWORD<span class="token operator">:</span> <span class="token number">123</span> 
		volumes<span class="token operator">:</span> <span class="token comment">// å¯¹åº” -v</span>
			- <span class="token string">&quot;/tmp/mysql/data:/var/lib/mysql&quot;</span>
			- <span class="token string">&quot;/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf&quot;</span>
	web<span class="token operator">:</span>
		build<span class="token operator">:</span> .
		ports<span class="token operator">:</span>
			- <span class="token string">&quot;8090:8090&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”ğŸ‘‡ğŸ‘‡ğŸ‘‡</p><p><img src="`+r+'" alt="image.png"></p><p>ä¸Šé¢çš„Composeæ–‡ä»¶å°±æè¿°ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå®¹å™¨ï¼š</p><ul><li>mysqlï¼šä¸€ä¸ªåŸºäºmysql:5.7.25é•œåƒæ„å»ºçš„å®¹å™¨ï¼Œå¹¶ä¸”æŒ‚è½½äº†ä¸¤ä¸ªç›®å½•</li><li>webï¼šä¸€ä¸ªåŸºäºdocker buildä¸´æ—¶æ„å»ºçš„é•œåƒå®¹å™¨ï¼Œæ˜ å°„ç«¯å£æ—¶8090</li></ul>',10),f={href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"},_=p('<blockquote><p>å…¶å®DockerComposeæ–‡ä»¶å¯ä»¥çœ‹åšæ˜¯å°†å¤šä¸ª<code>docker run</code>å‘½ä»¤å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯è¯­æ³•ç¨æœ‰å·®å¼‚ã€‚</p></blockquote><h2 id="éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤" aria-hidden="true">#</a> éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤</h2><p><strong>å®ç°æ€è·¯</strong>ï¼š</p><p>â‘ ç¼–å†™<code>compose</code>æ–‡ä»¶</p><p>â‘¡ä¿®æ”¹è‡ªå·±çš„å¾®æœåŠ¡é¡¹ç›®ï¼Œå°†æ•°æ®åº“ã€<code>nacos</code>åœ°å€éƒ½å‘½åä¸º<code>docker-compose</code>ä¸­çš„æœåŠ¡å</p><p>â‘¢ä½¿ç”¨mavenæ‰“åŒ…å·¥å…·ï¼Œå°†é¡¹ç›®ä¸­çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ä¸º <code>.jar</code></p><p>â‘£å°†æ‰“åŒ…å¥½çš„<code>.jar</code>æ‹·è´åˆ°è‡ªå·±å¾®æœåŠ¡é¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªå¯¹åº”çš„å­ç›®å½•ä¸­</p><p>â‘¤å°†è‡ªå·±çš„å¾®æœåŠ¡é¡¹ç›®ä¸Šä¼ è‡³è™šæ‹Ÿæœºï¼Œåˆ©ç”¨ <code>docker-compose up -d</code> æ¥éƒ¨ç½²</p><h3 id="composeæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#composeæ–‡ä»¶" aria-hidden="true">#</a> composeæ–‡ä»¶</h3><p>å‡è®¾ç°åœ¨æœ‰å¦‚ä¸‹å‡ ä¸ªæœåŠ¡éœ€è¦éƒ¨ç½²</p><p><img src="'+d+`" alt="image.png"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.2&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos/nacos<span class="token punctuation">-</span>server
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MODE</span><span class="token punctuation">:</span> standalone
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8848:8848&quot;</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>5.7.25
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">123</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;$PWD/mysql/data:/var/lib/mysql&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;$PWD/mysql/conf:/etc/mysql/conf.d/&quot;</span>
  <span class="token key atrule">userservice</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./user<span class="token punctuation">-</span>service
  <span class="token key atrule">orderservice</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./order<span class="token punctuation">-</span>service
  <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./gateway
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;10010:10010&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­åŒ…å«5ä¸ªserviceæœåŠ¡ï¼š</p><ul><li>nacosï¼šä½œä¸ºæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒ <ul><li>image: nacos/nacos-serverï¼š åŸºäºnacos/nacos-serveré•œåƒæ„å»º</li><li>environmentï¼šç¯å¢ƒå˜é‡ <ul><li>MODE: standaloneï¼šå•ç‚¹æ¨¡å¼å¯åŠ¨</li></ul></li><li>portsï¼šç«¯å£æ˜ å°„ï¼Œè¿™é‡Œæš´éœ²äº†8848ç«¯å£</li></ul></li><li>mysqlï¼šæ•°æ®åº“ <ul><li>image: mysql:5.7.25ï¼šé•œåƒç‰ˆæœ¬æ˜¯mysql:5.7.25</li><li>environmentï¼šç¯å¢ƒå˜é‡ <ul><li>MYSQL_ROOT_PASSWORD: 123ï¼šè®¾ç½®æ•°æ®åº“rootè´¦æˆ·çš„å¯†ç ä¸º123</li></ul></li><li>volumesï¼šæ•°æ®å·æŒ‚è½½ï¼Œè¿™é‡ŒæŒ‚è½½äº†mysqlçš„dataã€confç›®å½•ï¼Œå…¶ä¸­æœ‰æˆ‘æå‰å‡†å¤‡å¥½çš„æ•°æ®</li></ul></li><li>userserviceã€orderserviceã€gatewayï¼šéƒ½æ˜¯åŸºäºDockerfileä¸´æ—¶æ„å»ºçš„</li></ul><h3 id="ä¿®æ”¹å¾®æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹å¾®æœåŠ¡é…ç½®" aria-hidden="true">#</a> ä¿®æ”¹å¾®æœåŠ¡é…ç½®</h3><p>å› ä¸ºå¾®æœåŠ¡å°†æ¥è¦éƒ¨ç½²ä¸º<code>docker</code>å®¹å™¨ï¼Œè€Œå®¹å™¨ä¹‹é—´äº’è”ä¸æ˜¯é€šè¿‡<code>IP</code>åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨åã€‚è¿™é‡Œæˆ‘ä»¬å°†order-serviceã€user-serviceã€gatewayæœåŠ¡çš„mysqlã€nacosåœ°å€éƒ½ä¿®æ”¹ä¸ºåŸºäºå®¹å™¨åçš„è®¿é—®ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//mysql<span class="token punctuation">:</span>3306/cloud_order<span class="token punctuation">?</span>useSSL=false
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> orderservice
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment"># nacosæœåŠ¡åœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰“åŒ…" tabindex="-1"><a class="header-anchor" href="#æ‰“åŒ…" aria-hidden="true">#</a> æ‰“åŒ…</h3><p>æ¥ä¸‹æ¥éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ã€‚å› ä¸ºä¹‹å‰æŸ¥çœ‹åˆ°<code>Dockerfile</code>ä¸­çš„<code>jar</code>åŒ…åç§°éƒ½æ˜¯<code>app.jar</code>ï¼Œå› æ­¤æˆ‘ä»¬çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ç”¨è¿™ä¸ªåç§°ã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹<code>pom.xml</code>ä¸­çš„æ‰“åŒ…åç§°æ¥å®ç°ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ä¿®æ”¹</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æœåŠ¡æ‰“åŒ…çš„æœ€ç»ˆåç§° --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>finalName</span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>finalName</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰“åŒ…åï¼š</p><p><img src="`+k+'" alt="image.png"></p><h3 id="æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•" tabindex="-1"><a class="header-anchor" href="#æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•" aria-hidden="true">#</a> æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•</h3><p>ç¼–è¯‘æ‰“åŒ…å¥½çš„<code>app.jar</code>æ–‡ä»¶ï¼Œéœ€è¦æ”¾åˆ°<code>Dockerfile</code>çš„åŒçº§ç›®å½•ä¸­ã€‚</p><blockquote><p>æ³¨æ„ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„<code>app.jar</code>æ”¾åˆ°ä¸æœåŠ¡åç§°å¯¹åº”çš„ç›®å½•ï¼Œåˆ«æé”™äº†</p></blockquote><p><img src="'+m+'" alt="image.png"></p><h3 id="éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²" aria-hidden="true">#</a> éƒ¨ç½²</h3><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°è™šæ‹Ÿæœºä¸­ï¼Œåˆ©ç”¨<code>DockerCompose</code>éƒ¨ç½²ã€‚</p><p>ä¸Šä¼ åˆ°ä»»æ„ç›®å½•ï¼š</p><p><img src="'+v+`" alt="image.png"></p><p>éƒ¨ç½²ï¼š</p><p>è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,35);function q(x,D){const e=o("router-link"),l=o("ExternalLinkIcon");return i(),u("div",null,[g,s("nav",h,[s("ul",null,[s("li",null,[a(e,{to:"#åˆè¯†dockercompose"},{default:t(()=>[n("åˆè¯†DockerCompose")]),_:1})]),s("li",null,[a(e,{to:"#éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤"},{default:t(()=>[n("éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤")]),_:1}),s("ul",null,[s("li",null,[a(e,{to:"#composeæ–‡ä»¶"},{default:t(()=>[n("composeæ–‡ä»¶")]),_:1})]),s("li",null,[a(e,{to:"#ä¿®æ”¹å¾®æœåŠ¡é…ç½®"},{default:t(()=>[n("ä¿®æ”¹å¾®æœåŠ¡é…ç½®")]),_:1})]),s("li",null,[a(e,{to:"#æ‰“åŒ…"},{default:t(()=>[n("æ‰“åŒ…")]),_:1})]),s("li",null,[a(e,{to:"#æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•"},{default:t(()=>[n("æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•")]),_:1})]),s("li",null,[a(e,{to:"#éƒ¨ç½²"},{default:t(()=>[n("éƒ¨ç½²")]),_:1})])])])])]),y,s("blockquote",null,[s("p",null,[n("DockerComposeçš„è¯¦ç»†è¯­æ³•å‚è€ƒå®˜ç½‘ï¼š"),s("a",f,[n("https://docs.docker.com/compose/compose-file/"),a(l)])])]),_])}const j=c(b,[["render",q],["__file","DockerCompose.html.vue"]]);export{j as default};
