---
title: Docker
sidebar: 'auto'
---
# Docker

## ä¸€ã€å®‰è£…

### CentOS7å®‰è£…Docker

Docker CE æ”¯æŒ 64 ä½ç‰ˆæœ¬ CentOS 7ï¼Œå¹¶ä¸”è¦æ±‚å†…æ ¸ç‰ˆæœ¬ä¸ä½äº 3.10ï¼Œ CentOS 7 æ»¡è¶³æœ€ä½å†…æ ¸çš„è¦æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨CentOS 7å®‰è£…Dockerã€‚

#### å¸è½½ï¼ˆå¯é€‰ï¼‰

å¦‚æœä¹‹å‰å®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„Dockerï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¸è½½ï¼š

```bash
yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-selinux \
                  docker-engine-selinux \
                  docker-engine \
                  docker-ce
```

#### å®‰è£…Docker

é¦–å…ˆéœ€è¦å¤§å®¶è™šæ‹Ÿæœºè”ç½‘ï¼Œå®‰è£…yumå·¥å…·

```bash
yum install -y yum-utils \
           device-mapper-persistent-data \
           lvm2 --skip-broken
```

ç„¶åæ›´æ–°æœ¬åœ°é•œåƒæº

```bash
# è®¾ç½®dockeré•œåƒæº
yum-config-manager \
    --add-repo \
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
    
sed -i 's/download.docker.com/mirrors.aliyun.com\/docker-ce/g' /etc/yum.repos.d/docker-ce.repo

yum makecache fast
```

å®‰è£…Docker

```bash
yum install -y docker-ce
```

docker-ceä¸ºç¤¾åŒºå…è´¹ç‰ˆæœ¬ã€‚ç¨ç­‰ç‰‡åˆ»ï¼Œdockerå³å¯å®‰è£…æˆåŠŸã€‚

#### å¯åŠ¨Docker

Dockeråº”ç”¨éœ€è¦ç”¨åˆ°å„ç§ç«¯å£ï¼Œé€ä¸€å»ä¿®æ”¹é˜²ç«å¢™è®¾ç½®ã€‚éå¸¸éº»çƒ¦ï¼Œå› æ­¤å»ºè®®å¤§å®¶ç›´æ¥å…³é—­é˜²ç«å¢™ï¼

```bash
# å…³é—­
systemctl stop firewalld
# ç¦æ­¢å¼€æœºå¯åŠ¨é˜²ç«å¢™
systemctl disable firewalld

# å¼€ç«¯å£  6379ä¸ºä¾‹
firewall-cmd --zone=public --add-port=6379/tcp --permanent
# é‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆ
systemctl restart firewalld
```

é€šè¿‡å‘½ä»¤å¯åŠ¨docker

```bash
systemctl start docker  # å¯åŠ¨dockeræœåŠ¡

systemctl stop docker  # åœæ­¢dockeræœåŠ¡

systemctl restart docker  # é‡å¯dockeræœåŠ¡
```

å¯ä»¥æŸ¥çœ‹dockerç‰ˆæœ¬

```bash
docker -v
```

#### é…ç½®é•œåƒåŠ é€Ÿ

dockerå®˜æ–¹é•œåƒä»“åº“ç½‘é€Ÿè¾ƒå·®ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®å›½å†…é•œåƒæœåŠ¡ï¼š

å‚è€ƒé˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿæ–‡æ¡£ï¼š[https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors](https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors)



### CentOSå®‰è£…DockerCompose

#### ä¸‹è½½

Linuxä¸‹éœ€è¦é€šè¿‡å‘½ä»¤ä¸‹è½½

```bash
# å®‰è£…
curl -L https://github.com/docker/compose/releases/download/1.23.1/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
```

ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¸Šä¼ åˆ° /usr/local/bin/ ç›®å½•

#### ä¿®æ”¹æ–‡ä»¶æƒé™

```bash
# ä¿®æ”¹æƒé™
chmod +x /usr/local/bin/docker-compose
```

#### Baseè‡ªåŠ¨è¡¥å…¨å‘½ä»¤

```bash
# è¡¥å…¨å‘½ä»¤
curl -L https://raw.githubusercontent.com/docker/compose/1.29.1/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose

# å¦‚æœè¿™é‡Œå‡ºç°é”™è¯¯ï¼Œéœ€è¦ä¿®æ”¹è‡ªå·±çš„hostsæ–‡ä»¶
echo "199.232.68.133 raw.githubusercontent.com" >> /etc/hosts
```

## äºŒã€DockeråŸºæœ¬æ“ä½œ

### é•œåƒæ“ä½œ

####  é•œåƒåç§°

é¦–å…ˆæ¥çœ‹ä¸‹é•œåƒçš„åç§°ç»„æˆï¼š

- é•œåç§°ä¸€èˆ¬åˆ†ä¸¤éƒ¨åˆ†ç»„æˆï¼š[repository]:[tag]ã€‚
- åœ¨æ²¡æœ‰æŒ‡å®štagæ—¶ï¼Œé»˜è®¤æ˜¯latestï¼Œä»£è¡¨æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ

![image.png](./img/1674040985291-d6b8f79e-106f-4de9-a67b-4dc1d6540375.png)

####  é•œåƒå‘½ä»¤

å¸¸è§çš„é•œåƒæ“ä½œå‘½ä»¤å¦‚å›¾

![image.png](./img/1674041077728-48ece357-63a0-467c-b335-d1db69afc886.png)

```bash
# æ‹‰å–é•œåƒ
docker pull nginx

# æŸ¥çœ‹æ‹‰å–åˆ°çš„é•œåƒ
docker images

# å¯¼å‡ºé•œåƒåˆ°ç£ç›˜ docker save -o [ä¿å­˜çš„ç›®æ ‡æ–‡ä»¶åç§°] [é•œåƒåç§°]
docker save -o nginx.tar nginx:latest

# åˆ é™¤æœ¬åœ°çš„ nginx é•œåƒ
docker rmi nginx:latest

# åŠ è½½æœ¬åœ°å‹ç¼©åŒ…ä¸ºé•œåƒ
docker load -i nginx.tar

```

### å®¹å™¨æ“ä½œ

#### å®¹å™¨ç›¸å…³å‘½ä»¤

![image.png](./img/1674041555641-c0ccf847-be1e-4882-b168-862d9cdcce7a.png)

å®¹å™¨ä¿æŠ¤ä¸‰ä¸ªçŠ¶æ€ï¼š

- è¿è¡Œï¼šè¿›ç¨‹æ­£å¸¸è¿è¡Œ
- æš‚åœï¼šè¿›ç¨‹æš‚åœï¼ŒCPUä¸å†è¿è¡Œï¼Œå¹¶ä¸é‡Šæ”¾å†…å­˜
- åœæ­¢ï¼šè¿›ç¨‹ç»ˆæ­¢ï¼Œå›æ”¶è¿›ç¨‹å ç”¨çš„å†…å­˜ã€CPUç­‰èµ„æº

å…¶ä¸­ï¼š

- docker runï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€
- docker pauseï¼šè®©ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨æš‚åœ
- docker unpauseï¼šè®©ä¸€ä¸ªå®¹å™¨ä»æš‚åœçŠ¶æ€æ¢å¤è¿è¡Œ
- docker stopï¼šåœæ­¢ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨
- docker startï¼šè®©ä¸€ä¸ªåœæ­¢çš„å®¹å™¨å†æ¬¡è¿è¡Œ
- docker rmï¼šåˆ é™¤ä¸€ä¸ªå®¹å™¨

```bash
# åˆ›å»ºå¹¶è¿è¡Œnginxå®¹å™¨çš„å‘½ä»¤
# --name ç»™å®¹å™¨èµ·ä¸ªå -p ç«¯å£æ˜ å°„ -d åå°è¿è¡Œ nginx é•œåƒåç§°
docker run --name mynginx -p 80:80 -d nginx

# è¿›å…¥Nginxå®¹å™¨ï¼Œä¿®æ”¹HTMLæ–‡ä»¶å†…å®¹ï¼Œæ·»åŠ â€œNginxæ¬¢è¿æ‚¨â€
# -it ç»™å½“å‰è¿›å…¥çš„å®¹å™¨åˆ›å»ºä¸€ä¸ªæ ‡å‡†è¾“å…¥ã€è¾“å‡ºç»ˆç«¯ï¼Œå…è®¸æˆ‘ä»¬ä¸å®¹å™¨äº¤äº’ bash linuxç»ˆç«¯äº¤äº’å‘½ä»¤
docker exec -it mynginx bash
cd /usr/share/nginx/html
# å®¹å™¨å†…æ²¡æœ‰viå‘½ä»¤ï¼Œæ— æ³•ç›´æ¥ä¿®æ”¹ï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥ä¿®æ”¹
sed -i -e 's#Welcome to nginx#Nginxæ¬¢è¿æ‚¨#g' -e 's#<head>#<head><meta charset="utf-8">#g' index.html
```

å®¹å™¨å†…éƒ¨ä¼šæ¨¡æ‹Ÿä¸€ä¸ªç‹¬ç«‹çš„Linuxæ–‡ä»¶ç³»ç»Ÿï¼Œçœ‹èµ·æ¥å¦‚åŒä¸€ä¸ªlinuxæœåŠ¡å™¨ä¸€æ ·

![image.png](./img/1674042538948-9435650f-3809-4114-838d-2cef0ed54a2a.png)

nginxçš„ç¯å¢ƒã€é…ç½®ã€è¿è¡Œæ–‡ä»¶å…¨éƒ¨éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è¦ä¿®æ”¹çš„htmlæ–‡ä»¶ã€‚

æŸ¥çœ‹DockerHubç½‘ç«™ä¸­çš„nginxé¡µé¢ï¼Œå¯ä»¥çŸ¥é“nginxçš„htmlç›®å½•ä½ç½®åœ¨/usr/share/nginx/html

### æ•°æ®å·

**æ•°æ®å·ï¼ˆvolumeï¼‰** æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼ŒæŒ‡å‘å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªç›®å½•ã€‚

**ä½œç”¨**ï¼šå°†æ•°æ®ä¸å®¹å™¨è§£è€¦ï¼Œè¿™å°±è¦ç”¨åˆ°æ•°æ®å·äº†ã€‚

åœ¨ä¹‹å‰çš„nginxæ¡ˆä¾‹ä¸­ï¼Œä¿®æ”¹nginxçš„htmlé¡µé¢æ—¶ï¼Œéœ€è¦è¿›å…¥nginxå†…éƒ¨ã€‚å¹¶ä¸”å› ä¸ºæ²¡æœ‰ç¼–è¾‘å™¨ï¼Œä¿®æ”¹æ–‡ä»¶ä¹Ÿå¾ˆéº»çƒ¦ã€‚

è¿™å°±æ˜¯å› ä¸ºå®¹å™¨ä¸æ•°æ®ï¼ˆå®¹å™¨å†…æ–‡ä»¶ï¼‰è€¦åˆå¸¦æ¥çš„åæœã€‚

![image.png](./img/1674042764260-966d0d5a-e6b3-4119-b449-3fde2466a370.png)

ä¸€æ—¦å®Œæˆæ•°æ®å·æŒ‚è½½ï¼Œå¯¹å®¹å™¨çš„ä¸€åˆ‡æ“ä½œéƒ½ä¼šä½œç”¨åœ¨æ•°æ®å·å¯¹åº”çš„å®¿ä¸»æœºç›®å½•äº†ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬æ“ä½œå®¿ä¸»æœºçš„/var/lib/docker/volumes/htmlç›®å½•ï¼Œå°±ç­‰äºæ“ä½œå®¹å™¨å†…çš„/usr/share/nginx/htmlç›®å½•äº†

![image.png](./img/1674042873555-548c7b76-8c55-49cc-a61b-3be61d4a6d86.png)

#### æ•°æ®å·å‘½ä»¤

```bash
docker volume [COMMAND]
```

docker volumeå‘½ä»¤æ˜¯æ•°æ®å·æ“ä½œï¼Œæ ¹æ®å‘½ä»¤åè·Ÿéšçš„commandæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ“ä½œï¼š

- create åˆ›å»ºä¸€ä¸ªvolume
- inspect æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªvolumeçš„ä¿¡æ¯
- ls åˆ—å‡ºæ‰€æœ‰çš„volume
- prune åˆ é™¤æœªä½¿ç”¨çš„volume
- rm åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„volume

#### åˆ›å»ºå’ŒæŸ¥çœ‹æ•°æ®å·

```bash
# åˆ›å»ºåä¸º html çš„æ•°æ®å·
docker volume create html

# æŸ¥çœ‹æ‰€æœ‰æ•°æ®
docker volume ls

# æŸ¥çœ‹ html æ•°æ®å·è¯¦ç»†ä¿¡æ¯å·
docker volume inspect html
```

![image.png](./img/1674043180233-962ed9f4-773e-4c8b-9658-2adc87a374ce.png)å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆ›å»ºçš„htmlè¿™ä¸ªæ•°æ®å·å…³è”çš„å®¿ä¸»æœºç›®å½•ä¸º/var/lib/docker/volumes/html/_dataç›®å½•

#### æŒ‚è½½æ•°æ®å·

æˆ‘ä»¬åœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ -v å‚æ•°æ¥æŒ‚è½½ä¸€ä¸ªæ•°æ®å·åˆ°æŸä¸ªå®¹å™¨å†…ç›®å½•

```bash
docker run /
  --name mn /
  -v html:/root/html /
  -p 8080:80
  nginx /
```

è¿™é‡Œçš„-vå°±æ˜¯æŒ‚è½½æ•°æ®å·çš„å‘½ä»¤ï¼š

- -v html:/root/htm ï¼šæŠŠhtmlæ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨å†…çš„/root/htmlè¿™ä¸ªç›®å½•ä¸­

```bash
# åˆ›å»ºä¸€ä¸ªnginxå®¹å™¨ï¼Œä¿®æ”¹å®¹å™¨å†…çš„htmlç›®å½•å†…çš„index.htmlå†…å®¹
# ä¸Šä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿›å…¥nginxå®¹å™¨å†…éƒ¨ï¼Œå·²ç»çŸ¥é“nginxçš„htmlç›®å½•æ‰€åœ¨ä½ç½®/usr/share/nginx/html ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç›®å½•æŒ‚è½½åˆ°htmlè¿™ä¸ªæ•°æ®å·ä¸Šï¼Œæ–¹ä¾¿æ“ä½œå…¶ä¸­çš„å†…å®¹

# åˆ›å»ºå®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·åˆ°å®¹å™¨å†…çš„HTMLç›®å½•
docker run --name mynginx -p 80:80 -v html:/usr/share/nginx/html -d nginx

# è¿›å…¥htmlæ•°æ®å·æ‰€åœ¨ä½ç½®ï¼Œå¹¶ä¿®æ”¹HTMLå†…å®¹
# æŸ¥çœ‹htmlæ•°æ®å·çš„ä½ç½®
docker volume inspect html
# è¿›å…¥è¯¥ç›®å½•
cd /var/lib/docker/volumes/html/_data
# ä¿®æ”¹æ–‡ä»¶
vi index.html
```

å®¹å™¨ä¸ä»…ä»…å¯ä»¥æŒ‚è½½æ•°æ®å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‚è½½åˆ°å®¿ä¸»æœºç›®å½•ä¸Šã€‚å…³è”å…³ç³»å¦‚ä¸‹ï¼š

- å¸¦æ•°æ®å·æ¨¡å¼ï¼šå®¿ä¸»æœºç›®å½• --> æ•°æ®å· ---> å®¹å™¨å†…ç›®å½•
- ç›´æ¥æŒ‚è½½æ¨¡å¼ï¼šå®¿ä¸»æœºç›®å½• ---> å®¹å™¨å†…ç›®å½•

![image.png](./img/1674043621675-24540510-69a7-4130-bdfc-4f7c167bfe73.png)

è¯­æ³•ï¼š

ç›®å½•æŒ‚è½½ä¸æ•°æ®å·æŒ‚è½½çš„è¯­æ³•æ˜¯ç±»ä¼¼çš„ï¼š

- -v [å®¿ä¸»æœºç›®å½•]:[å®¹å™¨å†…ç›®å½•]
- -v [å®¿ä¸»æœºæ–‡ä»¶]:[å®¹å™¨å†…æ–‡ä»¶]

**å‘½ä»¤æ¯”è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨ CTRL + F æœç´¢**

## ä¸‰ã€Dockerå‘½ä»¤æ±‡æ€»

![image.png](./img/1676871692271-1afd24fb-1279-4f0f-b5b2-2861f66713d1.png)

 é•œåƒä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯åˆ†ä¸ºè¿œç¨‹é•œåƒä»“åº“å’Œæœ¬åœ°é•œåƒä»“åº“ã€‚ 

 é€šè¿‡`pull`å‘½ä»¤å¯ä»¥æŠŠè¿œç¨‹ä»“åº“çš„é•œåƒä¸‹è½½åˆ°æœ¬åœ°ï¼Œé€šè¿‡`push`å‘½ä»¤å¯ä»¥æŠŠæœ¬åœ°ä»“åº“çš„é•œåƒæ¨é€åˆ°è¿œç¨‹ 

 æœ¬åœ°ä»“åº“ä¸­çš„é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»ºå®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ 

 å®¹å™¨ä¹Ÿå¯ä»¥é€šè¿‡`commit`å‘½ä»¤æ‰“åŒ…æˆé•œåƒï¼Œæäº¤åˆ°æœ¬åœ°ä»“åº“ã€‚  

### æ“ä½œè¿œç¨‹ä»“åº“çš„å‘½ä»¤  

####  loginï¼šç™»å½•åˆ°è¿œç¨‹ä»“åº“  

 loginå‘½ä»¤å¯ä»¥ç™»å½•åˆ°è¿œç¨‹ä»“åº“ï¼Œç™»å½•åˆ°è¿œç¨‹ä»“åº“åå¯å¯ä»¥æ‹‰å–ä»“åº“çš„é•œåƒäº†  

 **loginè¯­æ³•**  

> **docker login [OPTIONS] [SERVER]**
> **SERVER**ï¼šè¿œç¨‹ä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºdockerå®˜æ–¹ä»“åº“
> **OPTIONS**ï¼š 
>
> - `-u` stringï¼šç”¨æˆ·å 
> - `-p` stringï¼šå¯†ç   

```bash
docker login -u linwei -p 123456 192.168.10.10/docker-lib
docker login 192.168.10.10/docker-lib
docker login
```

####  searchï¼šä»è¿œç¨‹ä»“åº“æœç´¢é•œåƒ  

**searchè¯­æ³•**  

>  **docker search [OPTIONS] TERM  **
>  **OPTIONS** ï¼š
>
>  -  `-f `å‚æ•°è¡¨ç¤ºæ ¹æ®æ¡ä»¶è¿‡æ»¤æœç´¢å‡ºæ¥çš„é•œåƒ    docker search -f KEY=VALUE TERM  
>  -  `KEY` 
>     - `stars` int: æ ¹æ®çƒ­åº¦è¿‡æ»¤ï¼Œå¦‚ï¼šstars=10è¡¨ç¤ºè¿‡æ»¤çƒ­åº¦å¤§äº10çš„é•œåƒ 
>     - `is-automated` boolean: æ ¹æ®æ˜¯å¦è‡ªåŠ¨æ„å»ºè¿‡æ»¤ï¼Œå¦‚ï¼šis-automated=falseè¡¨ç¤ºè¿‡æ»¤éè‡ªåŠ¨æ„å»ºçš„é•œåƒ 
>     - `is-official` boolean: æ ¹æ®æ˜¯å¦å®˜æ–¹å‘å¸ƒè¿‡æ»¤ï¼Œå¦‚ï¼šis-official=falseè¡¨ç¤ºè¿‡æ»¤éå®˜æ–¹å‘å¸ƒçš„é•œåƒ  
>  -  ` --format` å‚æ•°ç”¨æ¥æŒ‡å®šæœç´¢å‡ºæ¥çš„é•œåƒçš„æ˜¾ç¤ºçš„æ ¼å¼  
>     -  docker search --format "[table] `{{COLUMN}}`[`{{COLUMN}}`...]" TERM  
>  -  `COLUMN`   
>     - .Name ï¼šæ˜¾ç¤ºé•œåƒçš„åç§°åˆ— 
>     - .Description ï¼šæ˜¾ç¤ºé•œåƒçš„æè¿°åˆ— 
>     - .StarCount ï¼šæ˜¾ç¤ºé•œåƒçš„çƒ­åº¦ä¸€åˆ— 
>     - .IsOfficial ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯å®˜æ–¹å‘å¸ƒä¸€åˆ— 
>     - .IsAutomated ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯è‡ªåŠ¨æ„å»ºä¸€åˆ—  
>
>   **TERM** ï¼šé•œåƒçš„å…³é”®è¯  

```bash
# æœç´¢centosé•œåƒ
docker search centos
# æœç´¢centosé•œåƒï¼Œåªå±•ç¤º5ä¸ª
docker search --limit 5 centos
# æœç´¢çƒ­åº¦å¤§äº100å¹¶ä¸”ä¸æ˜¯è‡ªåŠ¨æ„å»ºçš„centosé•œåƒ
docker search -f stars=100 -f is-automated=true centos
# æœç´¢éå®˜æ–¹å‘å¸ƒçš„centosé•œåƒï¼Œæœç´¢ç»“æœåªå±•ç¤ºåç§°å’Œçƒ­åº¦ï¼Œåˆ—ä¹‹é—´ç”¨TABé”®éš”å¼€
docker search -f is-official=false --format "table{{.Name}}\t{{.StarCount}}" centos
```

searchå‘½ä»¤å¯ä»¥ä»è¿œç¨‹ä»“åº“æœç´¢é•œåƒ  

![image.png](./img/1676872012670-528a6e00-35c1-45f3-862f-d16b39448d13.png)

åˆ—å«ä¹‰ï¼š

| **NAME** | **DESCRIPTION** | **STARS**                       | **OFFICIAL**   | **AUTOMATED** |
| -------- | --------------- | ------------------------------- | -------------- | ------------- |
| é•œåƒåç§° | é•œåƒæè¿°        | é•œåƒçƒ­åº¦ï¼Œç±»ä¼¼äºgithubçš„ starts | æ˜¯å¦æ˜¯å®˜æ–¹å‘å¸ƒ | æ˜¯å¦è‡ªåŠ¨æ„å»º  |

####  pushï¼šæŠŠæœ¬åœ°é•œåƒæ¨é€åˆ°è¿œç¨‹ä»“åº“  

 pushå¯ä»¥æŠŠæœ¬åœ°ä»“åº“ä¸­çš„é•œåƒæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œä¸è¿‡éœ€è¦å…ˆç™»å½•è¿œç¨‹ä»“åº“  

 **pushè¯­æ³•**

> **docker push [OPTIONS] NAME[:TAG]**
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> -  `--disable-content-trust` ï¼šæ¨é€æ—¶è¿œç¨‹ä»“åº“ä¸æ ¡éªŒç­¾åï¼Œé»˜è®¤ä¸ºtrue  
>
>  **NAME** ï¼šé•œåƒåç§° 
>  **TAG** ï¼šé•œåƒç‰ˆæœ¬å·ï¼Œå¯çœç•¥ï¼Œé»˜è®¤ä¸ºlatest  

```bash
docker push my-image:1.1.0
docker push my-image
```

####  pullï¼šä»è¿œç¨‹ä»“åº“æ‹‰å–æˆ–æ›´æ–°é•œåƒ  

 pullå‘½ä»¤å¯ä»¥ä»è¿œç¨‹ä»“åº“æ‹‰å–é•œåƒï¼Œå¦‚æœæœ¬åœ°ä»“åº“å·²ç»å­˜åœ¨è¯¥é•œåƒï¼Œåˆ™ä¼šæ›´æ–°

 **pullè¯­æ³•** 

> **docker pull [OPTIONS] NAME[:TAG|@DIGEST]**
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> -  `-a` : æ‹‰å–é•œåƒçš„æ‰€æœ‰ç‰ˆæœ¬å· 
> -  `--disable-content-trust` ï¼šæ¨é€æ—¶è¿œç¨‹ä»“åº“ä¸æ ¡éªŒç­¾åï¼Œé»˜è®¤ä¸º true 
> -  `-q` : å®‰é™æ¨¡å¼ï¼Œæ¨é€è¿‡ç¨‹ä¸­ä¸å±•ç¤ºè¯¦ç»†ä¿¡æ¯  
>
> **NAME** ï¼šé•œåƒåç§° 
> **TAG** ï¼šé•œåƒç‰ˆæœ¬å·ï¼Œå¯çœç•¥ï¼Œé»˜è®¤ä¸ºlatest 
> **DIGEST** ï¼š é•œåƒçš„æ‘˜è¦ï¼Œæ¯ä¸ªé•œåƒéƒ½æœ‰å¯¹åº”çš„åç§°ã€idã€æ‘˜è¦ä¿¡æ¯ï¼Œæ¯ä¸ªæ‘˜è¦ä¿¡æ¯èƒ½å”¯ä¸€ä»£è¡¨ä¸€ä¸ªé•œåƒ  

![image.png](./img/1676872752771-5407ace4-4002-47ef-ae83-2f5b8a966727.png)

```bash
docker pull centos
docker pull -q centos:5.11
docker pull -a -q centos
```

###  æ“ä½œæœ¬åœ°é•œåƒçš„å‘½ä»¤  

####  imagesï¼šæ˜¾ç¤ºæ‰€æœ‰é•œåƒ  

 imageså‘½ä»¤å¯ä»¥æ˜¾ç¤ºæœ¬åœ°å­˜åœ¨çš„æ‰€æœ‰é•œåƒ  

 **imagesè¯­æ³•**

> **docker images [OPTIONS] [REPOSITORY[:TAG]]** 
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> - `-a` : æ˜¾ç¤ºæ‰€æœ‰é•œåƒï¼ŒåŒ…å«ä¸­é—´æ˜ åƒï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸­é—´æ˜ åƒæ˜¯éšè—çš„ï¼‰ 
> - `-f` filter: æ ¹æ®æ¡ä»¶è¿‡æ»¤é•œåƒ
>   -   docker images -f KEY=VALUE [REPOSITORY[:TAG]]  
>   -   KEYï¼š 
>       - `dangling` booleanï¼šè¿‡æ»¤æ‚¬æŒ‚çš„é•œåƒï¼Œå¦‚ï¼šdangling=trueè¡¨ç¤ºåªæ˜¾ç¤ºæ‚¬æŒ‚çš„é•œåƒ 
>       - `label` string: æ ¹æ®æ ‡ç­¾è¿‡æ»¤ï¼Œå¦‚ï¼šlabel=versionè¡¨ç¤ºæ˜¾ç¤ºæœ‰versionæ ‡ç­¾çš„é•œåƒï¼Œlabel=version=1.0 è¡¨ç¤ºæ˜¾ç¤ºversion=1.0çš„é•œåƒ 
>       - `before` image: æ˜¾ç¤ºåœ¨æŸä¸ªé•œåƒä¹‹å‰åˆ›å»ºçš„é•œåƒï¼Œå¦‚ï¼š before=centos:5.8è¡¨ç¤ºæ˜¾ç¤ºåœ¨centos:5.8è¿™ä¸ªé•œåƒä¹‹å‰åˆ›å»ºçš„é•œåƒ 
>       - `since` image: æ˜¾ç¤ºåœ¨æŸä¸ª å­˜åœ¨ä¹‹ååˆ›å»ºçš„é•œåƒï¼Œå¦‚ï¼šsince=centos:5.8è¡¨ç¤ºæ˜¾ç¤ºåœ¨centos:5.8è¿™ä¸ªé•œåƒå­˜åœ¨ä¹‹åçš„é•œåƒ 
>       - `reference` stringï¼šæ¨¡ç³ŠåŒ¹é…ï¼Œå¦‚ï¼šreference=cent:5, æ˜¾ç¤ºåç§°å·²centå¼€å¤´ç‰ˆæœ¬å·å·²5å¼€å¤´çš„ é•œåƒ  
> - `-q` : åªæ˜¾ç¤ºé•œåƒid 
> - `no-trunc` ï¼šæ˜¾ç¤ºå®Œæ•´çš„é•œåƒidã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé•œ åƒçš„idåªæ˜¾ç¤ºå‰12ä½ï¼Œno-truncå‚æ•°ä¼šå°†é•œåƒidå®Œæ•´çš„æ˜¾ç¤ºå‡ºæ¥ 
> - `--digests` ï¼šæ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ ä¿¡æ¯ 
> - `--format` string: æŒ‡å®šé•œåƒæ˜¾ç¤ºçš„æ ¼å¼ï¼Œæ ¼å¼è¯¦è§ä¸‹æ–‡  
>   -  docker images --format "[table] `{{COLUMN}}`[`{{COLUMN}}`...]" [REPOSITORY[:TAG]]  
>   -  `COLUMN`:
>      - ` .ID` ï¼šæ˜¾ç¤ºé•œåƒçš„åç§°åˆ— 
>      - `.Repository` ï¼šæ˜¾ç¤ºé•œåƒçš„æè¿°åˆ— 
>      - `.Tag` ï¼šæ˜¾ç¤ºé•œåƒçš„çƒ­åº¦ä¸€åˆ— 
>      - `.Digest` ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯å®˜æ–¹å‘å¸ƒä¸€åˆ— 
>      - `.CreatedSince` ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯è‡ªåŠ¨æ„å»ºä¸€åˆ— 
>      - `.CreatedAt` ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯è‡ªåŠ¨æ„å»ºä¸€åˆ— 
>      - `.Size` ï¼šæ˜¾ç¤ºé•œåƒæ˜¯å¦æ˜¯è‡ªåŠ¨æ„å»ºä¸€åˆ—  
>
> **REPOSITORY** ï¼šé•œåƒè·¯å¾„ 
> **TAG** ï¼šé•œåƒç‰ˆæœ¬  

```bash
# æ˜¾ç¤ºæœ¬åœ°æ‰€æœ‰é•œåƒ
docker images
# æ˜¾ç¤ºæœ¬åœ°æ‰€æœ‰é•œåƒï¼Œåªæ˜¾ç¤ºidåˆ—å¹¶ä¸”ä¸æˆªæ–­
docker images -q --no-trunc
# æ˜¾ç¤ºcentosé•œåƒä¿¡æ¯
docker images centos
# æ˜¾ç¤ºåˆ—ä¸­åŒ…å«centå…³é”®å­—çš„æ‰€æœ‰é•œåƒ
docker images | grep cent
# æ˜¾ç¤ºæœ¬åœ°æ‰€æœ‰é•œåƒï¼Œå¹¶æ˜¾ç¤ºæ‘˜è¦åˆ—
docker images --digests
# æ˜¾ç¤ºåœ¨cengos:latesté•œåƒä¹‹ååˆ›å»ºçš„latestç‰ˆæœ¬çš„æ‰€æœ‰é•œåƒ
docker images -f since=centos:latest -f reference=*:latest
# æ˜¾ç¤ºæ‰€æœ‰é•œåƒä¿¡æ¯ï¼Œåªæ˜¾ç¤ºé•œåƒidã€æ‘˜è¦ã€åˆ›å»ºæ—¶é—´3åˆ—ï¼Œåˆ—ä¹‹é—´ç”¨TABé”®éš”å¼€
docker images --format "table {{.ID}}\t{{.Digest}}\t{{.CreatedAt}}"
# æ˜¾ç¤ºåœ¨centos:5.11é•œåƒä¹‹å‰åˆ›å»ºçš„é•œåƒï¼Œåªæ˜¾ç¤ºé•œåƒä»“åº“è·¯å¾„ã€ç‰ˆæœ¬å·ã€åˆ›å»ºæ—¶é—´3åˆ—ï¼Œåˆ—ä¹‹é—´ç”¨TABé”®éš”å¼€
docker images -f before=centos:5.11 --format "table {{.Repository}}\t{{.Tag}}\t{{.CreatedAt}}"
```

![image.png](./img/1676872996481-89f6337c-45f6-42a9-8716-21ea99a344e4.png)

åˆ—å«ä¹‰ï¼š

| **REPOSITORY** | **TAG**  | **IMAGE ID** | **CREATED** | **SIZE** |
| -------------- | -------- | ------------ | ----------- | -------- |
| ä»“åº“è·¯å¾„       | é•œåƒç‰ˆæœ¬ | é•œåƒid       | åˆ›å»ºæ—¶é—´    | é•œåƒå¤§å° |

####  rmiï¼šåˆ é™¤æœ¬åœ°é•œåƒ  

 rmiå‘½ä»¤å¯ä»¥åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæœ¬åœ°é•œåƒï¼Œé€šå¸¸æƒ…å†µåº”è¯¥ç”¨rmè¡¨ç¤ºåˆ é™¤å‘½ä»¤ï¼Œä½†æ˜¯åœ¨dokerå‘½ä»¤ä¸­rm è¡¨ç¤ºåˆ é™¤å®¹     å™¨ï¼Œæ‰€ä»¥ç”¨rmiè¡¨ç¤ºåˆ é™¤é•œåƒï¼Œå…¶ä¸­çš„ i æ˜¯imageçš„é¦–å­—æ¯  

**rmiè¯­æ³•** 

> **docker rmi [OPTIONS] IMAGE [IMAGE...]**
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> -  `-f `: å¼ºåˆ¶åˆ é™¤ï¼Œå¦‚æœé•œåƒæœ‰å¯¹åº”çš„å®¹å™¨æ­£åœ¨è¿è¡Œï¼Œåˆ™ä¸å…è®¸ç›´æ¥åˆ é™¤é•œåƒï¼Œéœ€è¦å¼ºåˆ¶åˆ é™¤ 
> -  `-- no-prune` ï¼šä¸åˆ é™¤è¯¥é•œåƒçš„è¿‡ç¨‹é•œåƒï¼Œé»˜è®¤æ˜¯åˆ é™¤çš„  
>
> **IMAGE** ï¼šé•œåƒidæˆ–ä»“åº“è·¯å¾„åç§°  

```bash
# åˆ é™¤centosé•œåƒ
docker rmi tomcat
# åˆ é™¤centos:5.11é•œåƒ
docker rmi centos:5.11
# åˆ é™¤idä¸º621ceef7494açš„é•œåƒ
docker rmi 621ceef7494a
# åŒæ—¶åˆ é™¤tomcatã€centoså’Œredisé•œåƒ
docker rmi tomcat centos redis
# å¼ºåˆ¶åˆ é™¤tomcaté•œåƒï¼Œå°±ç®—æ­¤æ—¶æœ‰tomcatå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œé•œåƒä¹Ÿä¼šè¢«åˆ é™¤
docker rmi -f tomcat
```

####  tagï¼šæ ‡è®°é•œåƒï¼Œå°†å…¶å½’å…¥ä»“åº“  

 `tag`å‘½ä»¤å¯ä»¥åŸºäºä¸€ä¸ªé•œåƒï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒå¹¶å½’å…¥æœ¬åœ°ä»“åº“ï¼Œæ­¤æ—¶è¯¥é•œåƒåœ¨ä»“åº“ä¸­å­˜åœ¨ä¸¤ä¸ª ç‰ˆæœ¬ï¼Œå¯ä»¥   æ ¹æ®è¿™ä¸¤ä¸ªé•œåƒåˆ›å»ºä¸åŒçš„å®¹å™¨ 

 **tagè¯­æ³•**

> **docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]**
> **SOURCE_IMAGE** : åŸé•œåƒ 
> **TARGET_IMAGE** ï¼šæ–°é•œåƒ 
> **TAG** ï¼šé•œåƒçš„ç‰ˆæœ¬å·  

```bash
# åŸºäºredis:latesté•œåƒåˆ›å»ºmy-redis1.0é•œåƒï¼Œå¹¶æŠŠæ–°é•œåƒå½’å…¥redis-libä»“åº“
docker tag redis:latest redis-lib/my-redis:1.0
# åŸºäº621ceef7494aé•œåƒåˆ›å»ºmy-redis:test-100mé•œåƒï¼Œå¹¶æŠŠæ–°é•œåƒå½’å…¥redis-libä»“åº“
docker tag 621ceef7494a redis-lib/my-redis:test-100m
```

####  historyï¼šæŸ¥çœ‹é•œåƒçš„åˆ›å»ºå†å²  

 historyå‘½ä»¤ç”¨æ¥æŸ¥çœ‹æŸä¸€ä¸ªé•œåƒçš„åˆ›å»ºå†å²ï¼Œä¹Ÿå°±æ˜¯é•œåƒçš„æäº¤è®°å½•

 **historyè¯­æ³•**

> **docker history [OPTIONS] IMAGE**
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> -  `-H` boolean: å·²å¯è¯»çš„æ ¼å¼æ‰“å°æ—¥æœŸå’Œå¤§å°ï¼Œé»˜è®¤ä¸ºtrue 
> -  `-q` : åªæ˜¾ç¤ºé•œåƒid
> -  `no-trunc` ï¼šè¾“å‡º ç»“æœä¸æˆªå–ï¼Œæ­£å¸¸æƒ…å†µä¸‹æŸ¥çœ‹åˆ°çš„ç»“æœå¦‚æœæŸä¸€åˆ—å¤ªé•¿ä¼šè¢«æˆªå–
> -  `--format` string: æŒ‡å®šé•œåƒæ˜¾ç¤ºçš„æ ¼å¼
>    -    docker history --format "[table] `{{COLUMN}}`[`{{COLUMN}}`...]" IMAGE  
>    -    `COLUMN`
>         -  `.ID `ï¼šé•œåƒçš„ID 
>         -  `.CreatedSince` ï¼šé•œåƒåˆ›å»ºçš„æ—¶é•¿ 
>         -  `.CreatedAt` ï¼šé•œåƒåˆ›å»ºçš„æ—¶é—´æˆ³ 
>         -  `.CreatedBy` ï¼šé•œåƒåˆ›å»ºä½¿ç”¨çš„å‘½ä»¤
>         -  ` .Size` ï¼šé•œåƒçš„å¤§å°
>         -  ` .Comment` ï¼šé•œåƒçš„è¯„è®º  
>
> **IMAGE** ï¼šé•œåƒ  

```bash
# æ˜¾ç¤ºcentosé•œåƒçš„åˆ›å»ºå†å²
docker history centos
# æ˜¾ç¤ºcentosé•œåƒçš„åˆ›å»ºå†å²ï¼Œæ—¶é—´å’Œå¤§å°è½¬æ¢ä¸ºäººç±»å¯è¯»çš„æ ¼å¼
docker history -H=true centos
# æ˜¾ç¤ºcentosé•œåƒçš„åˆ›å»ºå†å²ï¼Œåªæ˜¾ç¤ºIDã€åˆ›å»ºæ—¶é—´æˆ³å’Œåˆ›å»ºæ—¶çš„å‘½ä»¤3åˆ—ï¼Œåˆ—ä¹‹é—´ä½¿ç”¨TABé”®éš”å¼€
docker history --format "table {{.ID}}\t{{.CreatedAt}}\t{{.CreatedBy}}" centos
```

####  saveï¼šå°†é•œåƒæ‰“åŒ…æˆæ–‡ä»¶  

saveå‘½ä»¤å¯ä»¥æŠŠä¸€ä¸ªé•œåƒæˆ–å¤šä¸ªé•œåƒæ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„å’Œexportå‘½ä»¤çš„åŒºåˆ† 

- saveå‘½ä»¤æ‰“åŒ…çš„æ˜¯é•œåƒï¼ŒåŒ…å«é•œåƒçš„æ‰€æœ‰ä¿¡æ¯ 
- exprotå‘½ä»¤æ‰“åŒ…çš„æ˜¯å®¹å™¨ï¼Œåªæ˜¯ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§ï¼Œå†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯å°†ä¼šä¸¢å¤±  

**saveè¯­æ³•** 

> **docker save [OPTIONS] IMAGE [IMAGE...]**
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> -  `-o` string: æŒ‡å®šç›®æ ‡æ–‡ä»¶ï¼Œå’ŒlinuxåŸç”Ÿå‘½ä»¤ > æœ‰ç›¸åŒä½œç”¨  
>
>  **IMAGE** ï¼šé•œåƒ  

```bash
# å°†centosé•œåƒæ‰“åŒ…æˆmy-images.tar
docker save centos > /home/my-images.tar
# å°†centosé•œåƒå’Œredisé•œåƒæ‰“åŒ…åˆ°my-images.tar
docker save centos redis > /home/my-images.tar
# å°†centosé•œåƒå’Œredisé•œåƒæ‰“åŒ…åˆ°my-images.tar
docker save -o /home/my-images.tar centos redis
```

####  loadï¼šä»æŒ‡å®šæ–‡ä»¶ä¸­åŠ è½½é•œåƒ  

 loadå‘½ä»¤å¯ä»¥ä»æŒ‡å®šæ–‡ä»¶ä¸­åŠ è½½é•œåƒï¼Œè¯¥æ–‡ä»¶éœ€è¦æ˜¯saveå‘½ä»¤ä¿å­˜çš„æ–‡ä»¶  

**loadè¯­æ³•**

> **docker load [OPTIONS]**
> **OPTIONS** ï¼šå¯é€‰å‚æ•°  
>
> -  `-i` string: æŒ‡å®šæ–‡ä»¶çš„è·¯å¾„ 
> -  `-q` ï¼šå®‰é™æ¨¡å¼è¾“å‡º  

```bash
# ä»my-images.taræ–‡ä»¶ä¸­åŠ è½½é•œåƒ
docker load < /home/my-images.tar
# ä»my-images.taræ–‡ä»¶ä¸­åŠ è½½é•œåƒ
docker load -i /home/my-images.tar
# ä½¿ç”¨å®‰é™æ¨¡å¼ä»my-images.taræ–‡ä»¶ä¸­åŠ è½½é•œåƒ
docker load -i /home/my-images.tar -q
```

###  æ“ä½œå®¹å™¨çš„å‘½ä»¤  

####  runï¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ  

 runå‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œï¼Œå¦‚æœåˆ›å»ºå®¹å™¨çš„é•œåƒä¸å­˜åœ¨åˆ™ä¼šä»è¿œç¨‹é•œåƒä»“åº“ä¸‹è½½ 

 è¿è¡Œå®¹å™¨çš„åŒæ—¶è¿˜èƒ½ç»™å®¹å™¨å‘é€ä¸€ä¸ªå‘½ä»¤  

 **runè¯­æ³•**

>  **docker run [OPTIONS] IMAGE [COMMAND] [ARG...]**
>  **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
>  -  `-i `: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œé€šå¸¸ä¸`-t`ä¸€èµ·ä½¿ç”¨ 
>  -  `-t` : ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œé€šå¸¸ä¸`-i`ä¸€èµ·ä½¿ç”¨
>  -  `-d` : åå°æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨id
>  -  `-p` list: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º `å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£` 
>  -  `-P` : éšæœºåˆ†é…ç«¯å£æ˜ å°„ 
>  -  `--name` string: ç»™å®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°
>  -  `-m` bytes: é™åˆ¶å®¹å™¨å¯ä»¥ä½¿ç”¨çš„å†…å­˜å¤§ å°ï¼Œå•ä½å¯é€‰bã€kã€mã€g
>  -  `-v` list: æŠŠå®¿ä¸»æœºçš„ç£ç›˜è·¯å¾„æŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªè·¯å¾„
>  -  `--volumes-from` list: ç»‘å®šåˆ«çš„å®¹å™¨æŸä¸ªè·¯å¾„åˆ°æ­¤å®¹å™¨çš„æŸä¸ªè·¯å¾„ 
>  -  `-w` : æŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½•ï¼Œé»˜è®¤æ˜¯æ ¹ç›®å½•
>  -  `--rm` : å½“å®¹å™¨åœæ­¢è¿è¡Œæ—¶è‡ªåŠ¨åˆ é™¤
>  -  `--hostname` string: æŒ‡å®šå®¹å™¨çš„ä¸»æœºå  
>
>   **IMAGE** ï¼šé•œåƒ
>  **COMMAND** ï¼šéœ€è¦è¿è¡Œçš„å‘½ä»¤
>  **ARG** ï¼šå‘½ä»¤çš„å‚æ•°  

```bash
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œå¹¶è¿è¡Œ
docker run centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œå¹¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ
docker run -it centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œå¹¶åå°æ¨¡å¼è¿è¡Œ
docker run -d centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œé‡å‘½åä¸ºmy-centosï¼Œå¹¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œbashå‘½ä»¤
docker run -it --name my-centos centos /bin/bash
# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨å¹¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå®¹å™¨é‡å‘½åä¸ºmy-bootï¼Œå¹¶æŠŠä¸»æœºçš„80ç«¯å£æ˜ å°„åˆ°å®¹
# å™¨çš„8080ç«¯å£ï¼Œæ­¤æ—¶è®¿é—®ä¸»æœºip+80ç«¯å£å³å¯è®¿é—®å®¹å™¨ä¸­çš„sping-booté¡¹ç›®
docker run -it --name my-boot -p 80:8080 spring-boot
# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨å¹¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå®¹å™¨é‡å‘½åä¸ºmy-bootï¼Œå¹¶æŠŠä¸»æœº/logs/my-boot/çš„
# ç›®å½•ç»‘å®šåˆ°å®¹å™¨çš„/logsç›®å½•ï¼Œæ­¤æ—¶my-booté¡¹ç›®çš„æ—¥å¿—å¯ä»¥åœ¨ä¸»æœºçš„/logs/my-bootç›®å½•ä¸­æŸ¥çœ‹
docker run -it --name my-boot -v /logs/my-boot/:/logs/ spring-boot
# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨å¹¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå®¹å™¨é‡å‘½åä¸ºmy-bootï¼›æŠŠä¸»æœºçš„80ç«¯å£æ˜ å°„åˆ°å®¹å™¨
# çš„8080ç«¯å£ï¼›æŠŠä¸»æœº/logs/my-boot/çš„è·¯å¾„ç»‘å®šåˆ°å®¹å™¨çš„/logsç›®å½•ï¼›ç»™å®¹å™¨åˆ†é…æœ€å¤§500Mçš„å†…
# å­˜ï¼›æŒ‡å®šspring-bootçš„é…ç½®æ–‡ä»¶ä¸ºtest
docker run -it --name my-boot -p 80:8080 -v /logs/my-boot/:/logs/ -m 500M spring-boot --spring.profiles.active=test
```

#### startï¼šå¯åŠ¨å®¹å™¨

startå‘½ä»¤å¯ä»¥å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»åœæ­¢çš„å®¹å™¨

**startè¯­æ³•**

> docker start [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - -`a` : å°†å®¹å™¨çš„æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡†é”™è¯¯é™„åŠ åˆ°ç»ˆç«¯ 
> - `-i` : ä¸ºå®¹å™¨é™„åŠ ä¸€ä¸ªæ ‡å‡†è¾“å…¥ç»ˆç«¯
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# å¯åŠ¨å·²ç»åœæ­¢çš„tomcatå®¹å™¨
docker start tomcat
# å¯åŠ¨å·²ç»åœæ­¢çš„tomcatå’Œcentoså®¹å™¨
docker start tomcat centos
# å¯åŠ¨å·²ç»åœæ­¢çš„my-spring-bootå®¹å™¨ï¼Œå¹¶è¾“å‡ºæ—¥å¿—
docker start -a my-spring-boot
# å¯åŠ¨å·²ç»åœæ­¢centoså®¹å™¨ï¼Œå¹¶é™„åŠ ä¸€ä¸ªè¾“å…¥ç»ˆç«¯
docker start -i centos
~~~



#### restartï¼šé‡å¯å®¹å™¨

restartå¯ä»¥å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨è¿›è¡Œé‡å¯ã€‚

å¦‚æœå®¹å™¨æ˜¯æœªå¯åŠ¨çš„åˆ™ä¼šå¯åŠ¨ï¼Œå¦‚æœæ˜¯æ­£åœ¨è¿è¡Œä¸­çš„ï¼Œåˆ™ ä¼šé‡å¯

**restartè¯­æ³•**

> docker restart [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-t` int: åœ¨é‡å¯ä¹‹å‰ç­‰å¾…å‡ ç§’ï¼Œé»˜è®¤10ç§’
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# é‡å¯centoså®¹å™¨
docker restart centos
# 20ç§’ä¹‹åé‡å¯centoså’Œtomcatå®¹å™¨ï¼Œå¦‚æœ20ç§’å†…è¿˜æœªåœæ­¢åˆ™ç›´æ¥æ€æ­»ç„¶åé‡å¯
docker restart -t 20 centos tomcat
~~~

#### stopï¼šåœæ­¢å®¹å™¨

`stop`å‘½ä»¤å¯ä»¥åœæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ 

`kill`å‘½ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥åœæ­¢å®¹å™¨

ä¸åŒçš„æ˜¯ï¼š

- `stop`å‘½ä»¤å…è®¸å®¹å™¨åœ¨åœæ­¢ä¹‹å‰æœ‰ä¸€å®šçš„æ—¶é—´æ¥è¿›è¡Œé¢å¤–æ“ä½œï¼Œå¦‚é‡Šæ”¾é“¾æ¥ã€å…³é—­è¯·æ±‚ç­‰ 
- `kill`å‘½ä»¤åˆ™ä¼šç›´æ¥å¼ºåˆ¶æ€æ­»å®¹å™¨

**stopè¯­æ³•**

> docker stop [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-t` int: ç­‰å¾…nç§’åå¦‚æœè¿˜æ²¡åœæ­¢ï¼Œç›´æ¥æ€æ­»ï¼Œé»˜è®¤10ç§’
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# åœæ­¢tomcatå®¹å™¨
docker stop tomcat
# åœæ­¢tomcatå’Œcentoså®¹å™¨
docker stop tomcat centos
# åœæ­¢tomcatå®¹å™¨ï¼Œå¦‚æœ5ç§’å†…è¿˜æœªåœæ­¢åˆ™ç›´æ¥æ€æ­»
docker stop -t 5 tomcat
~~~

#### killï¼šæ€æ­»å®¹å™¨

killå‘½ä»¤å¯ä»¥æ€æ­»ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨

**killè¯­æ³•**

> docker kill [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-s` string: ç»™å®¹å™¨å‘é€ä¸€ä¸ªä¿¡å·ï¼Œä¿¡å·ç¼–å·å’Œ`linux`åŸç”Ÿå‘½ä»¤`kill`çš„ä¿¡å·ç¼–å·ä¸€è‡´ï¼Œé»˜è®¤å€¼9
>   - `1` ï¼šæ€æ­»å¹¶é‡æ–°åŠ è½½ï¼Œä¹Ÿå¯ç”¨ `HUP` è¡¨ç¤º 
>   - `9` ï¼šå¼ºåˆ¶æ€æ­»ï¼Œä¹Ÿå¯ç”¨ `KILL` è¡¨ç¤ºï¼Œé»˜è®¤å€¼ 
>   - `15` ï¼šæ­£ å¸¸åœæ­¢ï¼Œä¹Ÿå¯ç”¨ `TERM` è¡¨ç¤º
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# æ€æ­»tomcatå®¹å™¨
docker kill tomcat
# å¼ºåˆ¶æ€æ­»tomcatå®¹å™¨
docker kill -s 9 tomcat
# å¼ºåˆ¶æ€æ­»tomcatå®¹å™¨
docker kill -s KILL tomcat
# æ€æ­»tomcatå’Œcentoså®¹å™¨
docker kill tomcat centos
~~~

#### rmï¼šåˆ é™¤å®¹å™¨

`rm`å‘½ä»¤å¯ä»¥åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ å¦‚æœå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œåˆ™éœ€è¦é€šè¿‡`-f`å‚æ•°å¼ºåˆ¶åˆ é™¤

**rmè¯­æ³•**

> docker rm [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-f` ï¼šå¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿å®¹å™¨æ­£åœ¨è¿è¡Œä¹Ÿå¯ä»¥åˆ é™¤ 
> - `-l` ï¼šåˆ é™¤å®¹å™¨ä¹‹é—´çš„ç½‘ç»œå…³ç³»ï¼Œè€Œä¸æ˜¯å®¹å™¨æœ¬ èº«
> - `-v` : åˆ é™¤å®¹å™¨å’Œå®ƒæŒ‚è½½çš„å·
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# åˆ é™¤centoså®¹å™¨
docker rm centos
# å¼ºåˆ¶åˆ é™¤centoså®¹å™¨ï¼Œå³ä½¿å®¹å™¨æ­£åœ¨è¿è¡Œä¹Ÿä¼šè¢«åˆ é™¤
docker rm -f centos
# åˆ é™¤centoså®¹å™¨ï¼Œå¹¶åˆ é™¤å®ƒæŒ‚è½½çš„å·
docker rm -f centos
# åˆ é™¤æ‰€æœ‰å·²ç»åœæ­¢çš„å®¹å™¨
docker rm $(docker ps -a -q)
# ç§»é™¤å®¹å™¨my-nginxå¯¹å®¹å™¨my-dbçš„è¿æ¥ï¼Œè¿æ¥ådb
docker rm -l db 
~~~

#### pauseï¼šæš‚åœå®¹å™¨

pauseå‘½ä»¤å¯ä»¥æš‚åœä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨

**pauseè¯­æ³•**

> docker pause CONTAINER [CONTAINER...]
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# æš‚åœæ­£åœ¨è¿è¡Œçš„centoså®¹å™¨
docker pause centos
# æš‚åœæ­£åœ¨è¿è¡Œçš„centoså’Œtomcatå®¹å™¨
docker pause centos tomcat
~~~

#### unpauseï¼šå–æ¶ˆæš‚åœå®¹å™¨

`unpause`å‘½ä»¤å¯ä»¥å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæš‚åœçš„å®¹å™¨å–æ¶ˆæš‚åœ 

**pauseè¯­æ³•**

> docker unpause CONTAINER [CONTAINER...]
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# å–æ¶ˆæš‚åœçš„centoså®¹å™¨
docker unpause centos
# å–æ¶ˆæš‚åœcentoså’Œtomcatå®¹å™¨
docker unpause centos tomcat
~~~



#### createï¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨

`create`å‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½†ä¸è¿è¡Œå®ƒ

åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥ä½¿ç”¨`start`å‘½ä»¤å¯åŠ¨ å’Œ`run`å‘½ä»¤çš„ç”¨æ³•å‡ ä¹ä¸€è‡´ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¦‚æœå®¹å™¨ä¾èµ–çš„é•œåƒä¸å­˜åœ¨éƒ½ä¼šä»è¿œç¨‹ä»“åº“æ‹‰å– 

`run`å‘½ä»¤åˆ›å»ºå®¹å™¨åä¼šè¿è¡Œå®¹å™¨ 

`create`å‘½ä»¤åªæ˜¯åˆ›å»ºå®¹å™¨ï¼Œä¸è¿è¡Œ 

**createè¯­æ³•**

> docker create [OPTIONS] IMAGE [COMMAND] [ARG...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> -  `create`å‘½ä»¤å’Œ`run`å‘½ä»¤çš„å¯é€‰å‚æ•°ä¸€æ ·
>
> **IMAGE** ï¼šé•œåƒ
>
> **COMMAND** ï¼šéœ€è¦è¿è¡Œçš„å‘½ä»¤
>
> **ARG** ï¼šå‘½ä»¤çš„å‚æ•°

~~~bash
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨
docker create centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œstartå¯åŠ¨æ—¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ
docker create -it centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œstartå¯åŠ¨æ—¶åå°æ¨¡å¼è¿è¡Œ
docker create -d centos
# åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œé‡å‘½åä¸ºmy-centosï¼Œstartæ—¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œbashå‘½ä»¤
docker create -it --name my-centos centos /bin/bash

# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨ï¼Œé‡å‘½åä¸ºmy-bootï¼Œå¹¶æŠŠä¸»æœºçš„80ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„8080ç«¯å£ï¼Œstart
# æ—¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œæ­¤æ—¶è®¿é—®ä¸»æœºip+80ç«¯å£å³å¯è®¿é—®å®¹å™¨ä¸­çš„sping-booté¡¹ç›®
docker create -it --name my-boot -p 80:8080 spring-boot

# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨ï¼Œå®¹å™¨é‡å‘½åä¸ºmy-bootï¼Œå¹¶æŠŠä¸»æœº/logs/my-boot/çš„ç›®å½•ç»‘å®šåˆ°å®¹å™¨
# çš„/logsç›®å½•ï¼Œstartæ—¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œæ­¤æ—¶my-booté¡¹ç›®çš„æ—¥å¿—å¯ä»¥åœ¨ä¸»æœºçš„/logs/my-bootç›®å½•
# ä¸­æŸ¥çœ‹
docker create -it --name my-boot -v /logs/my-boot/:/logs/ spring-boot

# åˆ›å»ºä¸€ä¸ªspring-bootå®¹å™¨ï¼Œå®¹å™¨é‡å‘½åä¸ºmy-bootï¼›æŠŠä¸»æœºçš„80ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„8080ç«¯å£ï¼›æŠŠ
# ä¸»æœº/logs/my-boot/çš„è·¯å¾„ç»‘å®šåˆ°å®¹å™¨çš„/logsç›®å½•ï¼›ç»™å®¹å™¨åˆ†é…æœ€å¤§500Mçš„å†…å­˜ï¼›æŒ‡å®šspring-bootçš„é…ç½®æ–‡ä»¶ä¸ºtestï¼›# startæ—¶ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ
docker create -it --name my-boot -p 80:8080 -v /logs/my-boot/:/logs/ -m 500M spring-boot --spring.profiles.active=test
~~~

#### execï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤

exceå‘½ä»¤å¯ä»¥åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ä¸­æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ 

**execè¯­æ³•**

> docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> - `-d` : å‘½ä»¤åœ¨åå°è¿è¡Œ 
> - -i ï¼šä¿æŒæ ‡å‡†è¾“å…¥ï¼Œé€šå¸¸å’Œ `-t` ä¸€èµ·ä½¿ç”¨ 
> - `-t` : åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œé€šå¸¸å’Œ `- i` ä¸€èµ·ä½¿ç”¨ 
> - `-w` string: æŒ‡å®šå®¹å™¨çš„è·¯å¾„
>
> **CONTAINER** ï¼šå®¹å™¨ 
>
> **COMMAND** ï¼šè¦æ‰§è¡Œçš„å‘½ä»¤ 
>
> **ARG** ï¼šå‘½ä»¤çš„å‚æ•°

~~~bash
# åœ¨centoså®¹å™¨ä¸­è¿è¡Œpwdå‘½ä»¤
docker exec centos pwd
# ä¸ºcentoså®¹å™¨åˆ†é…ä¸€ä¸ªè¾“å…¥ç»ˆç«¯
docker exec -it centos /bin/bash
# åœ¨centosé•œåƒä¸­çš„binç›®å½•æ‰§è¡Œlså‘½ä»¤
docker exec -w /bin centos ls
~~~

#### psï¼šæŸ¥çœ‹å®¹å™¨åˆ—è¡¨

pså‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„åˆ—è¡¨ï¼ŒæŸ¥çœ‹å®¹å™¨çš„åŸºæœ¬ä¿¡æ¯ã€‚

ä¸åŠ ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤åªå±•ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨

![image-20230406195636025](./img/image-20230406195636025.png)

åˆ—å«ä¹‰å¦‚ä¸‹

| CONTAINER ID | IMAGE       | COMMAND               | CREATED  | PORTS         | NAMES     |
| ------------ | ----------- | --------------------- | -------- | ------------- | --------- |
| å®¹å™¨id       | å¯¹åº”çš„é•œ åƒ | å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„ å‘½ä»¤ | åˆ›å»ºæ—¶é—´ | ç»‘å®šçš„çš„ç«¯ å£ | å®¹å™¨å ç§° |

**psè¯­æ³•**

> docker ps [OPTIONS]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-a` : æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼Œé»˜è®¤åªæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„
> - `-f` filter: æ ¹æ®æ¡ä»¶è¿‡æ»¤å®¹å™¨ï¼Œè¯­æ³•å¦‚ä¸‹
>   - docker ps -f KEY=VALUE
>   - KEYçš„å¯é€‰å€¼å¦‚ä¸‹
>     - `id` : æ ¹æ®å®¹å™¨idè¿‡æ»¤ 
>     - `name` : æŸ¥çœ‹å®¹å™¨åç§°ä¸­åŒ…å«ç»™å®šå­—æ®µçš„å®¹å™¨ 
>     - `exited` : æ ¹æ®å®¹å™¨é€€å‡ºçš„é”™ è¯¯ç è¿›è¡Œè¿‡æ»¤ 
>     - `status` : æ ¹æ®å®¹å™¨çš„çŠ¶æ€è¿›è¡Œè¿‡æ»¤ï¼ŒçŠ¶æ€å¯é€‰å€¼æœ‰ï¼šcreatedã€pausedã€ exitedã€deadã€runningã€restartingã€removing 
>     - `before` : åªæ˜¾ç¤ºåœ¨æŸä¸ªå®¹å™¨ä¹‹å‰åˆ›å»ºçš„å®¹å™¨ 
>     - `since` : åªæ˜¾ç¤ºåœ¨æŸä¸ªå®¹å™¨ä¹‹ååˆ›å»ºçš„å®¹å™¨ 
>     - `volume` : è¿‡æ»¤ç»‘å®šäº†æŸä¸ªç›®å½•çš„å®¹å™¨ï¼Œåªé’ˆå¯¹è¿è¡Œ ä¸­çš„å®¹å™¨ 
>     - `publish` : æ ¹æ®å®¿ä¸»æœºç«¯å£è¿‡æ»¤ï¼Œåªé’ˆå¯¹è¿è¡Œä¸­çš„å®¹å™¨ 
>     - `expose` : æ ¹æ®å®¹å™¨ç«¯å£è¿‡æ»¤ï¼Œåªé’ˆå¯¹è¿è¡Œä¸­çš„å®¹å™¨
> - `-n` intï¼šæ˜¾ç¤ºæœ€ååˆ›å»ºçš„nä¸ªå®¹å™¨ï¼ŒåŒ…å«æ‰€æœ‰çŠ¶æ€ 
> - `-l` : æ˜¾ç¤ºæœ€æ–°åˆ›å»ºçš„å®¹å™¨ï¼ŒåŒ…å«æ‰€æœ‰çŠ¶æ€ 
>
> - `-q` : åªæ˜¾ç¤ºå®¹å™¨id 
> - `-s` : æ˜¾ç¤ºå®¹å™¨å¤§å°ï¼Œé»˜è®¤ä¸æ˜¾ç¤ºè¯¥åˆ— 
> - `--no-trunc` ï¼šæ˜¾ç¤ºå†…å®¹ä¸æˆªæ–­ï¼Œé»˜è®¤æƒ… å†µä¸‹æ˜¾ç¤ºçš„å®¹å™¨æ˜¯æˆªæ–­åçš„ä¿¡æ¯

~~~bash
# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -a
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œå¹¶æ˜¾ç¤ºå®¹å™¨å¤§å°
docker ps -a -s
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œæ˜¾ç¤ºå†…å®¹ä¸æˆªæ–­
docker ps -a --no-trunc
# æŸ¥çœ‹å®¹å™¨åç§°ä¸­åŒ…å«centçš„å®¹å™¨
docker ps -f name=cent
# æŸ¥çœ‹çŠ¶æ€æ˜¯createdçš„å®¹å™¨
docker ps -f status=created
# æŸ¥çœ‹åœ¨centosä¹‹å‰åˆ›å»ºçš„å®¹å™¨
docker ps -f before=centos
# æŸ¥çœ‹ç»‘å®šäº†å®¿ä¸»æœº80ç«¯å£å¹¶ä¸”æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps -f publish=80
~~~

#### inspectï¼šè·å–å®¹å™¨æˆ–é•œåƒçš„å…ƒæ•°æ®

`inspect`å‘½ä»¤å¯ä»¥è·å–ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨æˆ–è€…é•œåƒçš„å…ƒæ•°æ®ä¿¡æ¯

å…ƒæ•°æ®ä¿¡æ¯å¯ä»¥ç†è§£ä¸ºå®¹å™¨æˆ–è€…é•œåƒçš„è¯¦æƒ…ï¼Œå®ƒæ¯” `ps` å‘½ä»¤æ˜¾ç¤ºçš„å†…å®¹è¦è¯¦ç»†çš„å¤šã€‚

æ¯”å¦‚è¯´ç«¯å£æ˜  å°„ã€æŒ‚è½½ç›®å½•ç­‰ï¼Œæ˜¾ç¤ºæ ¼å¼ä¸º`json`ç±»å‹

**inspectè¯­æ³•**

> docker inspect [OPTIONS] CONTAINER|IMAGE [CONTAINER|IMAGE...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> `-f` string: æ ¼å¼åŒ–è¾“å‡ºç»“æœï¼Œinspecté»˜è®¤æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶çš„è¯¦æƒ…ï¼Œ-få‚æ•°å¯ä»¥æŒ‡å®šåªæ˜¾ç¤ºæŸäº›å± æ€§ 
>
> `--s` : åªå¯¹å®¹å™¨æœ‰æ•ˆï¼Œæ˜¾ç¤ºå®¹å™¨çš„é…ç½®æ–‡ä»¶è¡Œæ•°å’Œå¤§å°ï¼Œæ˜¾ç¤ºçš„ç»“æœä¸­ä¼šå¤šå‡º`SizeRw`ã€ `SizeRootFs`ä¸¤ä¸ªå‚æ•° 
>
> `--type` string: æŒ‡å®šè¦inspectçš„ç±»å‹ï¼Œcontainerè¡¨ç¤ºå®¹å™¨ï¼Œimageè¡¨ç¤º é•œåƒï¼Œé»˜è®¤æ˜¯å®¹å™¨ã€‚
>
> æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªtomcaté•œåƒï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªåç§°ä¸ºtomcatçš„å®¹å™¨ï¼Œå°±å¯ä»¥ç”¨-- typeå‚æ•°æ¥æŒ‡å®šè¦inspectæ˜¯tomcatå®¹å™¨è¿˜æ˜¯tomcaté•œåƒ
>
> **CONTAINER** ï¼šå®¹å™¨ 
>
> **IMAGE** ï¼šé•œåƒ

~~~bash
# æŸ¥çœ‹tomcatå®¹å™¨çš„å…ƒæ•°æ®ä¿¡æ¯
docker inspect tomcat
# æŸ¥çœ‹tomcaté•œåƒçš„å…ƒæ•°æ®ä¿¡æ¯
docker inspect --type=image tomcat
# æŸ¥çœ‹tomcatå®¹å™¨çš„ipåœ°å€
docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'
tomcat
# æŸ¥çœ‹tomcatå®¹å™¨çš„ipåœ°å€
docker inspect tomcat | grep IPAddress
# æŸ¥çœ‹tomcatå®¹å™¨çš„ç«¯å£æ˜ å°„
docker inspect -f "{{.HostConfig.PortBindings}}" tomcat
# æŸ¥çœ‹tomcatå®¹å™¨çš„æŒ‚è½½ç›®å½•
docker inspect -f "{{.HostConfig.Binds}}" tomcat
~~~

#### statsï¼šç›‘æ§å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ

`stats`å‘½ä»¤å¯ä»¥å¯ä»¥ç›‘æ§å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¦‚`cpu`ä½¿ç”¨æƒ…å†µã€å†…å­˜ä½¿ç”¨æƒ…å†µç­‰ã€‚

æ¯ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œ ç›´åˆ°ä½¿ç”¨ `ctrl+c` é€€å‡º

![image-20230406200537517](./img/image-20230406200537517.png)

åˆ—å«ä¹‰å¦‚ä¸‹

| CONTAINER ID | NAME      | CPU %         | MEM USAGE/LIMIT            | MEM %           | NET I/O | BLOCK I/O | PIDS                    |
| ------------ | --------- | ------------- | -------------------------- | --------------- | ------- | --------- | ----------------------- |
| å®¹å™¨id       | å®¹å™¨å ç§° | cpuä½¿ç”¨ç™¾åˆ†æ¯” | ä½¿ç”¨å†…å­˜å¤§å°/ æœ€å¤§å¯ç”¨å†…å­˜ | å†…å­˜ä½¿ç”¨ ç™¾åˆ†æ¯” | ç½‘ç»œ IO | ç£ç›˜IO    | å®¹å™¨å†…çº¿ç¨‹æˆ– è¿›ç¨‹çš„æ•°é‡ |

**statsè¯­æ³•**

> docker stats [OPTIONS] [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-a` filter: æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œé»˜è®¤åªæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„
> - `--format` stringï¼šæ ¼å¼åŒ–è¾“ å‡ºç»“æœ 
> - `--no-stream` : ä¸é—´éš”åˆ·æ–°ï¼Œåªæ˜¾ç¤ºç¬¬ä¸€æ¬¡ç»Ÿè®¡ç»“æœ 
> - `--no-trunc` : ä¸æˆªæ–­æ˜¾ç¤ºä¿¡æ¯ï¼Œé»˜è®¤ æƒ…å†µä¸‹æœ‰äº›å­—æ®µåªæ˜¾ç¤ºç®€ç•¥ä¿¡æ¯ï¼Œå¦‚å®¹å™¨id
>
>  **CONTAINER** ï¼šå®¹å™¨

~~~bash
# ç›‘æ§æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ
docker stats
# ç›‘æ§æ‰€æœ‰å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŒ…å«æœªå¯åŠ¨çš„å®¹å™¨
docker stats -a
# åªç›‘æ§centoså®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ
docker stats centos
# ç›‘æ§centoså®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œæ˜¾ç¤ºç»“æœä¸åˆ·æ–°
docker stats --no-stream centos
~~~

#### topï¼šæŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯

`top`å¯ä»¥æŸ¥çœ‹å®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯ï¼Œ `docker exec CONTAINER ps` ä¹Ÿå¯ä»¥æŸ¥çœ‹å®¹å™¨çš„è¿›ç¨‹ã€‚ 

ä¸åŒçš„æ˜¯ï¼š

- å‰è€…æŸ¥çœ‹çš„æ˜¯å®¹å™¨è¿è¡Œåœ¨å®¿ä¸»æœºçš„è¿›ç¨‹idã€‚
- åè€…æŸ¥çœ‹çš„æ˜¯å®¹å™¨å†…çš„è¿›ç¨‹id

**topè¯­æ³•**

> docker top CONTAINER [ps OPTIONS]
>
> **CONTAINER** ï¼šå®¹å™¨ 
>
> **OPTIONS** ï¼špså‘½ä»¤çš„å¯é€‰å‚æ•°

~~~bash
# æŸ¥çœ‹centosé•œåƒçš„å®¿ä¸»æœºè¿›ç¨‹id
docker top centos
~~~

#### renameï¼šé‡å‘½åå®¹å™¨

`rename`å¯ä»¥å¯¹å®¹å™¨è¿›è¡Œé‡å‘½åï¼Œåœ¨å®¹å™¨`run`æ—¶å¦‚æœæ²¡æœ‰ä½¿ç”¨`--name`å‚æ•°æŒ‡å®šå®¹å™¨åç§°ï¼Œå¯ä»¥ä½¿ç”¨ `rename`è¿›è¡Œå‘½å

**renameè¯­æ³•**

> docker rename CONTAINER NEW_NAME

~~~bash
# å°†centoså®¹å™¨é‡å‘½åä¸ºmy-centos
docker rename centos my-centos
~~~

#### attachï¼šè¿æ¥åˆ°å®¹å™¨å†…

`attach`å¯ä»¥è¿æ¥åˆ°å®¹å™¨å†…ï¼Œè¿™ä¸ªå®¹å™¨å¿…é¡»æ˜¯æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä¸æ˜¯è¿è¡ŒçŠ¶æ€æ—¶ï¼Œä¼šæŠ¥é”™ 

å½“ä½¿ç”¨ `ctrl+c` æˆ– `exit` ç­‰å‘½ä»¤é€€å‡ºå®¹å™¨æ—¶ï¼Œä¼šå¯¼è‡´å®¹å™¨åœæ­¢è¿è¡Œã€‚

æ‰€ä»¥ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯¥å‘½ä»¤ã€‚ç”Ÿäº§ç¯å¢ƒå¯ä»¥ä½¿ç”¨`exec`å‘½ä»¤è¿›å…¥å®¹å™¨ 

**attachè¯­æ³•**

> docker attach [OPTIONS] CONTAINER 
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> `--sig-proxy=false` boolean: é»˜è®¤`true`ï¼Œä¸º`false`æ—¶å¯ä»¥é˜²æ­¢å®¹å™¨é‡åˆ° `ctrl+c` é€€å‡ºä¿¡å·æ—¶åœæ­¢è¿è¡Œ
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# è¿›å…¥æ­£åœ¨è¿è¡Œçš„centosé•œåƒå†…
docker attach centos
~~~

#### updateï¼šæ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„é…ç½®

updateå¯ä»¥å¯¹å®¹å™¨çš„é…ç½®è¿›è¡Œæ›´æ–°

**updateè¯­æ³•**

> docker update [OPTIONS] CONTAINER [CONTAINER...]
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-m` bytes: æŒ‡å®šå®¹å™¨çš„å†…å­˜å¤§å°ï¼Œå•ä½å¯é€‰bã€kã€mã€g 
> - `--memory-swap` bytesï¼š 
> - -`-cpu demecial`ï¼šcpuèµ„æºï¼Œå¦‚1.5è¡¨ç¤ºå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„1.5ä¸ªcpuèµ„æº 
> - -`-cpuset-cpus` stringï¼šå®¹å™¨ å¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„cpuå†…æ ¸ç¼–å·ï¼Œ 0-3 è¡¨ç¤º4ä¸ªå†…æ ¸éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ 1,3 è¡¨ç¤ºåªèƒ½ä½¿ç”¨1å’Œ3å·å†… æ ¸ 
> - `--restart` string: æŒ‡å®šå®¹å™¨çš„é€€å‡ºçš„é‡å¯ç­–ç•¥ã€‚
>   - `no`ï¼šä¸é‡å¯ï¼›
>   - `on-failure`ï¼šå®¹å™¨éæ­£å¸¸é€€å‡º æ—¶é‡å¯ï¼›
>   - `on-failure:3`ï¼šéæ­£å¸¸é€€å‡ºæ—¶é‡å¯3æ¬¡ï¼›
>   - `alaways`ï¼šæ€»æ˜¯é‡å¯ï¼›
>   - `unless-stopped`ï¼šåœ¨å®¹ å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨ 
> - `--pidslimit` int: é™åˆ¶å®¹å™¨è¿›ç¨‹æˆ–çº¿ç¨‹çš„æ•°é‡ï¼Œé»˜è®¤-1è¡¨ç¤ºä¸é™åˆ¶
>
>  **CONTAINER** ï¼šå®¹å™¨

~~~bash
# æ›´æ–°centosé•œåƒçš„å†…å­˜ä¸º2G
docker update --memory-swap -1 -m 2g centos
# æ›´æ–°å®¹å™¨çš„é‡å¯ç­–ç•¥
docker update --restart on-failure:3 centos
# æ›´æ–°tomcatå®¹å™¨çš„æœ€å¤§çº¿ç¨‹æ•°ä¸º2000
docker update --pids-limit 2000 tomcat
~~~

#### logsï¼šæŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—

**logsè¯­æ³•**

> docker logs [OPTIONS] CONTAINER
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•°
>
> - `-f` : è·Ÿè¸ªæ—¥å¿—çš„å®æ—¶è¾“å‡º 
> - `--until` stringï¼šæŸ¥çœ‹æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„æ—¥å¿—ï¼Œæ ¼å¼ï¼š2021-06- 03T19:30:20Zã€‚æˆ–ä½¿ç”¨ç›¸å¯¹æ—¶é—´10mï¼Œè¡¨ç¤º10åˆ†é’Ÿä¹‹å‰ 
> - `--since` stringï¼šæŸ¥çœ‹æŸä¸ªæ—¶é—´ç‚¹ä¹‹ åçš„æ—¥å¿—ï¼Œæ ¼å¼ï¼š2021-06-03T19:30:20Zã€‚ä½¿ç”¨ç›¸å¯¹æ—¶é—´10mï¼Œè¡¨ç¤º10åˆ†é’Ÿä¹‹å†… 
> - `-n` int: æŸ¥çœ‹ æœ€åå‡ è¡Œæ—¥å¿—ï¼Œé»˜è®¤æ˜¾ç¤ºå…¨éƒ¨ 
> - `-t` : æ—¥å¿—ä¸­æ˜¾ç¤ºæ—¶é—´æˆ³
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# æŸ¥çœ‹tomcatæœ€å10è¡Œæ—¥å¿—
docker logs -n 10 tomcat
# æŸ¥çœ‹tomcatæœ€å10è¡Œæ—¥å¿—ï¼Œå¹¶å®æ—¶ç›‘æ§æ—¥å¿—è¾“å‡º
docker logs -n 10 -f tomcat
# æŸ¥çœ‹æœ€è¿‘10åˆ†é’Ÿçš„æ—¥å¿—
docker logs --since 10m tomcat
# æŸ¥çœ‹6æœˆ3å·9ç‚¹åˆ°10ç‚¹ä¹‹é—´çš„æ—¥å¿—
docker logs --since 2021-06-03T9:00:00 --until 2021-06-03T10:00:00 tomcat
~~~

#### waitï¼šé˜»å¡å®¹å™¨ï¼Œç›´åˆ°å®¹å™¨é€€å‡ºå¹¶æ‰“å°å®ƒçš„é€€å‡ºä»£ç 

waitå‘½ä»¤å¯ä»¥é˜»å¡ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ç›´åˆ°å®¹å™¨é€€å‡ºå¹¶æ‰“å°å‡ºä»–ä»¬çš„é€€å‡ºä»£ç 

**waitè¯­æ³•**

> docker wait CONTAINER [CONTAINER...]
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# é˜»å¡centoså®¹å™¨ï¼Œç›´åˆ°å®ƒé€€å‡ºå¹¶æ‰“å°é€€å‡ºçŠ¶æ€ç 
docker wait centos
# æ­¤æ—¶æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå°†centoså®¹å™¨stopæ‰ï¼Œåˆ‡æ¢åˆ°waitçš„ç»ˆç«¯å°±å¯ä»¥çœ‹åˆ°æ‰“å‡ºä¸€ä¸ªçŠ¶æ€ç 
~~~

#### portï¼šåˆ—å‡ºç«¯å£çš„æ˜ å°„å…³ç³»

**portè¯­æ³•**

> docker port CONTAINER [PRIVATE_PORT[/PROTO]]
>
> **CONTAINER** ï¼šå®¹å™¨ 
>
> **PRIVATE_PORT** ï¼šå®¹å™¨ç«¯å£ 
>
> **PROTO** ï¼šç«¯å£ä½¿ç”¨çš„åè®®

~~~bash
# æŸ¥çœ‹my-bootå®¹å™¨çš„ç«¯å£æ˜ å°„
docker port my-boot
# æŸ¥çœ‹my-bootå®¹å™¨çš„8080ç«¯å£æ˜ å°„çš„å®¿ä¸»æœºç«¯å£
docker port my-boot 8080
# æŸ¥çœ‹my-bootå®¹å™¨ä½¿ç”¨tcpåè®®çš„8080ç«¯å£æ˜ å°„çš„å®¿ä¸»æœºç«¯å£
docker port my-boot 8080/tcp
~~~

#### exportï¼šå°†å®¹å™¨æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶

`export`å‘½ä»¤å¯ä»¥å°†å®¹å™¨æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå®ƒå’Œ`save`å‘½ä»¤æ¯”è¾ƒå®¹æ˜“æ··æ·† 

`export`å’Œ`save`çš„ä¸åŒä¹‹å¤„åœ¨äºï¼š

- `save`æ‰“åŒ…çš„æ˜¯é•œåƒ 
- `export`æ‰“åŒ…çš„æ˜¯å®¹å™¨ï¼Œæ˜¯å®¹å™¨å½“æ—¶çš„å¿«ç…§ï¼Œè‡³äºå®¹å™¨çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯éƒ½ä¼šä¸¢å¤±ã€‚è¿˜æœ‰ï¼Œ`export`çš„æ–‡ä»¶åœ¨è¢«`import`æˆä¸€ä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥é‡æ–°æŒ‡å®šé•œåƒçš„åç§°å’Œç‰ˆæœ¬å·

**exportè¯­æ³•**

> docker export [OPTIONS] CONTAINER
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> - `-o` string: æŒ‡å®šæ‰“åŒ…æ–‡ä»¶
>
> **CONTAINER** ï¼šå®¹å™¨

~~~bash
# å°†my-bootå®¹å™¨æ‰“åŒ…åˆ°my-boot.taræ–‡ä»¶
docker export -o /tmp/my-boot.tar my-boot
~~~

#### importï¼šä»æœ¬åœ°æ–‡ä»¶æˆ–è¿œç¨‹æ–‡ä»¶å¯¼å…¥é•œåƒåˆ°æœ¬åœ°ä»“åº“ 

`import`å¯ä»¥ä»æœ¬åœ°æ–‡ä»¶æˆ–è¿œç¨‹æ–‡ä»¶ä¸­å¯¼å…¥é•œåƒåˆ°æœ¬åœ°ä»“åº“ 

å¦‚æœæ˜¯ä»æ–‡ä»¶ä¸­å¯¼å…¥ï¼Œè¿™ä¸ªæ–‡ä»¶éœ€è¦æ˜¯`export`å‘½ä»¤å¯¼å‡ºçš„æ–‡ä»¶ 

**importè¯­æ³•**

> docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]] 
>
> **OPTIONS** ï¼šå¯é€‰å‚æ•° 
>
> - `-m` string: æ·»åŠ æè¿°ä¿¡æ¯ 
> - `-c` list: å¯¹åˆ›å»ºçš„å®¹å™¨ä½¿ç”¨dokerfileæŒ‡ä»¤
>
> **file** ï¼šæ–‡ä»¶åœ°å€ 
>
> **URL** ï¼šURLåœ°å€ 
>
> **-**ï¼šä»æ ‡å‡†è¾“å…¥ç»ˆç«¯å¯¼å…¥ï¼Œé€šå¸¸å’Œ linuxä¸­çš„catå‘½ä»¤ä¸€èµ·ä½¿ç”¨ 
>
> **REPOSITORY** ï¼šæœ¬åœ°é•œåƒä»“åº“åœ°å€ 
>
> **TAG** ï¼šé•œåƒç‰ˆæœ¬å·

~~~bash
# ä»my-boot.taræ–‡ä»¶åˆ›å»ºé•œåƒ
cat /tmp/my-boot.tar | docker import -
# ä»my-boot.taræ–‡ä»¶åˆ›å»ºé•œåƒ
docker import /tmp/my-boot.tar
# ä»my-boot.taræ–‡ä»¶åˆ›å»ºé•œåƒï¼Œå¹¶æŒ‡å®šé•œåƒåç§°ä¸ºmy-boot-testã€ç‰ˆæœ¬å·ä¸º1.0
docker import /tmp/my-boot.tar my-boot-test:1.0
# ä»my-boot.taræ–‡ä»¶åˆ›å»ºé•œåƒï¼Œå¤‡æ³¨ä¿¡æ¯ä¸ºæµ‹è¯•ï¼Œå¹¶æŒ‡å®šé•œåƒåç§°ä¸ºmy-boot-testã€ç‰ˆæœ¬å·ä¸º1.0
docker import --message 'æµ‹è¯•' /tmp/my-boot.tar my-boot-test:1.0
# ä»è¿œç¨‹æœåŠ¡å™¨çš„my-boot.taræ–‡ä»¶åˆ›å»ºé•œåƒ
docker import http://192.168.100.1:8080/images/my-boot.tar
~~~



## å››ã€Dockerfileè‡ªå®šä¹‰é•œåƒ

å¸¸è§çš„é•œåƒåœ¨`DockerHub`å°±èƒ½æ‰¾åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„é¡¹ç›®å°±å¿…é¡»è‡ªå·±æ„å»ºé•œåƒäº†ã€‚

è€Œè¦è‡ªå®šä¹‰é•œåƒï¼Œå°±å¿…é¡»å…ˆäº†è§£é•œåƒçš„ç»“æ„æ‰è¡Œã€‚

### é•œåƒç»“æ„

é•œåƒæ˜¯å°†åº”ç”¨ç¨‹åºåŠå…¶éœ€è¦çš„ç³»ç»Ÿå‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ã€ä¾èµ–æ‰“åŒ…è€Œæˆã€‚

æˆ‘ä»¬ä»¥`MySQL`ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹é•œåƒçš„ç»„æˆç»“æ„

![image.png](./img/1674047922303-b4452544-568e-481c-b8a4-8272d5a153b1.png)

ç®€å•æ¥è¯´ï¼Œé•œåƒå°±æ˜¯åœ¨ç³»ç»Ÿå‡½æ•°åº“ã€è¿è¡Œç¯å¢ƒåŸºç¡€ä¸Šï¼Œæ·»åŠ åº”ç”¨ç¨‹åºæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–æ–‡ä»¶ç­‰ç»„åˆï¼Œç„¶åç¼–å†™å¥½å¯åŠ¨è„šæœ¬æ‰“åŒ…åœ¨ä¸€èµ·å½¢æˆçš„æ–‡ä»¶ã€‚

æˆ‘ä»¬è¦æ„å»ºé•œåƒï¼Œå…¶å®å°±æ˜¯å®ç°ä¸Šè¿°æ‰“åŒ…çš„è¿‡ç¨‹ã€‚

### Dockerfileè¯­æ³•

æˆ‘ä»¬åªéœ€è¦å‘Šè¯‰`Docker`ï¼Œæˆ‘ä»¬çš„é•œåƒçš„ç»„æˆï¼Œéœ€è¦å“ªäº›`BaseImage`ã€éœ€è¦æ‹·è´ä»€ä¹ˆæ–‡ä»¶ã€éœ€è¦å®‰è£…ä»€ä¹ˆä¾èµ–ã€å¯åŠ¨è„šæœ¬æ˜¯ä»€ä¹ˆï¼Œå°†æ¥`Docker`ä¼šå¸®åŠ©æˆ‘ä»¬æ„å»ºé•œåƒã€‚

**è€Œæè¿°ä¸Šè¿°ä¿¡æ¯çš„æ–‡ä»¶å°±æ˜¯Dockerfileæ–‡ä»¶ã€‚**

**`Dockerfile`**å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸ªçš„**æŒ‡ä»¤(Instruction)**ï¼Œç”¨æŒ‡ä»¤æ¥è¯´æ˜è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œæ¥æ„å»ºé•œåƒã€‚æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå½¢æˆä¸€å±‚`Layer`ã€‚

![image.png](./img/1674048024472-ff0ec242-eea0-4679-9132-423a9028f7a1.png)

æ›´æ–°è¯¦ç»†è¯­æ³•è¯´æ˜ï¼Œè¯·å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š [https://docs.docker.com/engine/reference/builder](https://docs.docker.com/engine/reference/builder)

### æ„å»ºJavaé¡¹ç›®

#### åŸºäºUbuntuæ„å»ºJavaé¡¹ç›®

éœ€æ±‚ï¼šåŸºäºUbuntué•œåƒæ„å»ºä¸€ä¸ªæ–°é•œåƒï¼Œè¿è¡Œä¸€ä¸ªjavaé¡¹ç›®

- æ­¥éª¤1ï¼šæ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ docker-demo
- æ­¥éª¤2ï¼šæ‹·è´Javaçš„ `.jar`åŒ…æ–‡ä»¶åˆ° docker-demo è¿™ä¸ªç›®å½•
- æ­¥éª¤3ï¼šæ‹·è´jdkçš„å‹ç¼©åŒ… jdk8.tar.gz æ–‡ä»¶åˆ° docker-demo è¿™ä¸ªç›®å½•
- æ­¥éª¤4ï¼šç¼–å†™`Dockerfile`æ–‡ä»¶åˆ° docker-demo è¿™ä¸ªç›®å½•

å…¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š

```dockerfile
# æŒ‡å®šåŸºç¡€é•œåƒ
FROM ubuntu:16.04
# é…ç½®ç¯å¢ƒå˜é‡ï¼ŒJDKçš„å®‰è£…ç›®å½•
ENV JAVA_DIR=/usr/local

# æ‹·è´jdkå’Œjavaé¡¹ç›®çš„åŒ…
COPY ./jdk8.tar.gz $JAVA_DIR/
COPY ./docker-demo.jar /tmp/app.jar

# å®‰è£…JDK
RUN cd $JAVA_DIR /
&& tar -xf ./jdk8.tar.gz / #è§£å‹
&& mv ./jdk1.8.0_144 ./java8 # é‡å‘½å

# é…ç½®ç¯å¢ƒå˜é‡
ENV JAVA_HOME=$JAVA_DIR/java8
ENV PATH=$PATH:$JAVA_HOME/bin

# æš´éœ²ç«¯å£
EXPOSE 8090
# å…¥å£ï¼Œjavaé¡¹ç›®çš„å¯åŠ¨å‘½ä»¤
ENTRYPOINT java -jar /tmp/app.jar
```

- æ­¥éª¤5ï¼šè¿›å…¥ docker-demo ç›®å½•
- æ­¥éª¤6ï¼šè¿è¡Œå‘½ä»¤ï¼š

```bash
# . è¡¨ç¤º dockerfile æ‰€åœ¨çš„ç›®å½• javaweb:1.0 æ„å»ºå®Œæˆçš„é•œåƒåç§°
docker build -t javaweb:1.0 .

docker images

# å¯åŠ¨é•œåƒ
docker run --name web -p 8090:8090 -d javaweb:1.0
```

æœ€åè®¿é—® [http://192.168.150.101:8090/hello/count](http://192.168.150.101:8090/hello/count)ï¼Œå…¶ä¸­çš„ipæ”¹æˆä½ çš„è™šæ‹Ÿæœºip

#### åŸºäºJava8æ„å»ºJavaé¡¹ç›®

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨ä¸€äº›å®‰è£…äº†éƒ¨åˆ†è½¯ä»¶çš„åŸºç¡€é•œåƒä¸Šåšæ”¹é€ ã€‚

ä¾‹å¦‚ï¼Œæ„å»ºjavaé¡¹ç›®çš„é•œåƒï¼Œå¯ä»¥åœ¨å·²ç»å‡†å¤‡äº†`JDK`çš„åŸºç¡€é•œåƒåŸºç¡€ä¸Šæ„å»ºã€‚

éœ€æ±‚ï¼šåŸºäºjava:8-alpineé•œåƒï¼Œå°†ä¸€ä¸ªJavaé¡¹ç›®æ„å»ºä¸ºé•œåƒ

å®ç°æ€è·¯å¦‚ä¸‹ï¼š

- â‘  æ–°å»ºä¸€ä¸ªç©ºçš„ç›®å½•ï¼Œç„¶ååœ¨ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º Dockerfile
- â‘¡ æ‹·è´`.jar`åˆ°è¿™ä¸ªç›®å½•ä¸­
- â‘¢ ç¼–å†™Dockerfileæ–‡ä»¶ï¼š
  - a ï¼‰åŸºäºjava:8-alpineä½œä¸ºåŸºç¡€é•œåƒ
  - b ï¼‰å°†`app.jar`æ‹·è´åˆ°é•œåƒä¸­
  - c ï¼‰æš´éœ²ç«¯å£
  - d ï¼‰ç¼–å†™å…¥å£`ENTRYPOINT`

å†…å®¹å¦‚ä¸‹ï¼š

```dockerfile
FROM java:8-alpine
COPY ./app.jar /tmp/app.jar
EXPOSE 8090
ENTRYPOINT java -jar /tmp/app.jar
```

- â‘£ ä½¿ç”¨docker buildå‘½ä»¤æ„å»ºé•œåƒ

```dockerfile
docker build -t javaweb:2.0 .
```

- â‘¤ ä½¿ç”¨docker runåˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ

å°ç»“ï¼š

1. Dockerfileçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡æŒ‡ä»¤æè¿°é•œåƒçš„æ„å»ºè¿‡ç¨‹
2. Dockerfileçš„ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯FROMï¼Œä»ä¸€ä¸ªåŸºç¡€é•œåƒæ¥æ„å»º
3. åŸºç¡€é•œåƒå¯ä»¥æ˜¯åŸºæœ¬æ“ä½œç³»ç»Ÿï¼Œå¦‚Ubuntuã€‚ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–äººåˆ¶ä½œå¥½çš„é•œåƒï¼Œä¾‹å¦‚ï¼šjava:8-alpine



## äº”ã€Docker-Compose

Docker Composeå¯ä»¥åŸºäºComposeæ–‡ä»¶å¸®æˆ‘ä»¬å¿«é€Ÿçš„éƒ¨ç½²åˆ†å¸ƒå¼åº”ç”¨ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ä¸€ä¸ªä¸ªåˆ›å»ºå’Œè¿è¡Œå®¹å™¨ï¼

### åˆè¯†DockerCompose

Composeæ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé€šè¿‡æŒ‡ä»¤å®šä¹‰é›†ç¾¤ä¸­çš„æ¯ä¸ªå®¹å™¨å¦‚ä½•è¿è¡Œã€‚

å°† `docker run` ä¸­çš„æ‰€æœ‰å‚æ•°è½¬æ¢ä¸º `Compose` å½¢å¼

```json
version:Â "3.8"

services:
	mysql: // å¯¹åº” --name
		image:Â mysql:5.7.25 // å¯¹åº”é•œåƒåç§°
		environment: // å¯¹åº” -e
			MYSQL_ROOT_PASSWORD: 123 
		volumes: // å¯¹åº” -v
			-Â "/tmp/mysql/data:/var/lib/mysql"
			-Â "/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf"
	web:
		build:Â .
		ports:
			- "8090:8090"

```

å¯¹åº”ğŸ‘‡ğŸ‘‡ğŸ‘‡

![image.png](./img/1674051402479-a53d1fd0-625c-4206-b98c-8f11881811c2.png)

ä¸Šé¢çš„Composeæ–‡ä»¶å°±æè¿°ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå®¹å™¨ï¼š

- mysqlï¼šä¸€ä¸ªåŸºäºmysql:5.7.25é•œåƒæ„å»ºçš„å®¹å™¨ï¼Œå¹¶ä¸”æŒ‚è½½äº†ä¸¤ä¸ªç›®å½•
- webï¼šä¸€ä¸ªåŸºäºdocker buildä¸´æ—¶æ„å»ºçš„é•œåƒå®¹å™¨ï¼Œæ˜ å°„ç«¯å£æ—¶8090

> DockerComposeçš„è¯¦ç»†è¯­æ³•å‚è€ƒå®˜ç½‘ï¼š[https://docs.docker.com/compose/compose-file/](https://docs.docker.com/compose/compose-file/)

> å…¶å®DockerComposeæ–‡ä»¶å¯ä»¥çœ‹åšæ˜¯å°†å¤šä¸ª`docker run`å‘½ä»¤å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯è¯­æ³•ç¨æœ‰å·®å¼‚ã€‚

### éƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤

**å®ç°æ€è·¯**ï¼š

â‘ ç¼–å†™`compose`æ–‡ä»¶

â‘¡ä¿®æ”¹è‡ªå·±çš„å¾®æœåŠ¡é¡¹ç›®ï¼Œå°†æ•°æ®åº“ã€`nacos`åœ°å€éƒ½å‘½åä¸º`docker-compose`ä¸­çš„æœåŠ¡å

â‘¢ä½¿ç”¨mavenæ‰“åŒ…å·¥å…·ï¼Œå°†é¡¹ç›®ä¸­çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ä¸º `.jar`

â‘£å°†æ‰“åŒ…å¥½çš„`.jar`æ‹·è´åˆ°è‡ªå·±å¾®æœåŠ¡é¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªå¯¹åº”çš„å­ç›®å½•ä¸­

â‘¤å°†è‡ªå·±çš„å¾®æœåŠ¡é¡¹ç›®ä¸Šä¼ è‡³è™šæ‹Ÿæœºï¼Œåˆ©ç”¨ `docker-compose up -d` æ¥éƒ¨ç½²

#### composeæ–‡ä»¶

å‡è®¾ç°åœ¨æœ‰å¦‚ä¸‹å‡ ä¸ªæœåŠ¡éœ€è¦éƒ¨ç½²

![image.png](./img/1674049445308-936302c3-c46b-4b8e-855e-bcf2ac3387fe.png)

å†…å®¹å¦‚ä¸‹ï¼š

```yaml
version: "3.2"

services:
  nacos:
    image: nacos/nacos-server
    environment:
      MODE: standalone
    ports:
      - "8848:8848"
  mysql:
    image: mysql:5.7.25
    environment:
      MYSQL_ROOT_PASSWORD: 123
    volumes:
      - "$PWD/mysql/data:/var/lib/mysql"
      - "$PWD/mysql/conf:/etc/mysql/conf.d/"
  userservice:
    build: ./user-service
  orderservice:
    build: ./order-service
  gateway:
    build: ./gateway
    ports:
      - "10010:10010"
```

å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­åŒ…å«5ä¸ªserviceæœåŠ¡ï¼š

- nacosï¼šä½œä¸ºæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒ
  - image: nacos/nacos-serverï¼š åŸºäºnacos/nacos-serveré•œåƒæ„å»º
  - environmentï¼šç¯å¢ƒå˜é‡
    - MODE: standaloneï¼šå•ç‚¹æ¨¡å¼å¯åŠ¨
  - portsï¼šç«¯å£æ˜ å°„ï¼Œè¿™é‡Œæš´éœ²äº†8848ç«¯å£
- mysqlï¼šæ•°æ®åº“
  - image: mysql:5.7.25ï¼šé•œåƒç‰ˆæœ¬æ˜¯mysql:5.7.25
  - environmentï¼šç¯å¢ƒå˜é‡
    - MYSQL_ROOT_PASSWORD: 123ï¼šè®¾ç½®æ•°æ®åº“rootè´¦æˆ·çš„å¯†ç ä¸º123
  - volumesï¼šæ•°æ®å·æŒ‚è½½ï¼Œè¿™é‡ŒæŒ‚è½½äº†mysqlçš„dataã€confç›®å½•ï¼Œå…¶ä¸­æœ‰æˆ‘æå‰å‡†å¤‡å¥½çš„æ•°æ®
- userserviceã€orderserviceã€gatewayï¼šéƒ½æ˜¯åŸºäºDockerfileä¸´æ—¶æ„å»ºçš„

#### ä¿®æ”¹å¾®æœåŠ¡é…ç½®

å› ä¸ºå¾®æœåŠ¡å°†æ¥è¦éƒ¨ç½²ä¸º`docker`å®¹å™¨ï¼Œè€Œå®¹å™¨ä¹‹é—´äº’è”ä¸æ˜¯é€šè¿‡`IP`åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨åã€‚è¿™é‡Œæˆ‘ä»¬å°†order-serviceã€user-serviceã€gatewayæœåŠ¡çš„mysqlã€nacosåœ°å€éƒ½ä¿®æ”¹ä¸ºåŸºäºå®¹å™¨åçš„è®¿é—®ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://mysql:3306/cloud_order?useSSL=false
    username: root
    password: 123
    driver-class-name: com.mysql.jdbc.Driver
  application:
    name: orderservice
  cloud:
    nacos:
      server-addr: nacos:8848 # nacosæœåŠ¡åœ°å€
```

#### æ‰“åŒ…

æ¥ä¸‹æ¥éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ã€‚å› ä¸ºä¹‹å‰æŸ¥çœ‹åˆ°`Dockerfile`ä¸­çš„`jar`åŒ…åç§°éƒ½æ˜¯`app.jar`ï¼Œå› æ­¤æˆ‘ä»¬çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ç”¨è¿™ä¸ªåç§°ã€‚

å¯ä»¥é€šè¿‡ä¿®æ”¹`pom.xml`ä¸­çš„æ‰“åŒ…åç§°æ¥å®ç°ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ä¿®æ”¹

```xml
<build>
  <!-- æœåŠ¡æ‰“åŒ…çš„æœ€ç»ˆåç§° -->
  <finalName>app</finalName>
  <plugins>
    <plugin>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-maven-plugin</artifactId>
    </plugin>
  </plugins>
</build>
```

æ‰“åŒ…åï¼š

![image.png](./img/1674049718897-09c08775-dd51-49b9-bb0a-2e3da4e40b45.png)

#### æ‹·è´jaråŒ…åˆ°éƒ¨ç½²ç›®å½•

ç¼–è¯‘æ‰“åŒ…å¥½çš„`app.jar`æ–‡ä»¶ï¼Œéœ€è¦æ”¾åˆ°`Dockerfile`çš„åŒçº§ç›®å½•ä¸­ã€‚

> æ³¨æ„ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„`app.jar`æ”¾åˆ°ä¸æœåŠ¡åç§°å¯¹åº”çš„ç›®å½•ï¼Œåˆ«æé”™äº†

![image.png](./img/1674049772013-8c2cde2c-b7a4-4e46-915d-ebf851701bf9.png)

#### éƒ¨ç½²

æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°è™šæ‹Ÿæœºä¸­ï¼Œåˆ©ç”¨`DockerCompose`éƒ¨ç½²ã€‚

ä¸Šä¼ åˆ°ä»»æ„ç›®å½•ï¼š

![image.png](./img/1674049811208-ac21384b-571f-4b8d-b9d5-a29b57a9d20b.png)

éƒ¨ç½²ï¼š

è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š

```bash
docker-compose up -d
```



## å…­ã€Dockeré•œåƒä»“åº“

æ­å»ºé•œåƒä»“åº“å¯ä»¥åŸºäº`Docker`å®˜æ–¹æä¾›çš„`DockerRegistry`æ¥å®ç°ã€‚

å®˜ç½‘åœ°å€ï¼š[https://hub.docker.com/_/registry](https://hub.docker.com/_/registry)

### æ­å»ºç§æœ‰é•œåƒä»“åº“

#### ç®€åŒ–ç‰ˆé•œåƒä»“åº“

`Docker`å®˜æ–¹çš„`Docker Registry`æ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„`Docker`é•œåƒä»“åº“ï¼Œå…·å¤‡ä»“åº“ç®¡ç†çš„å®Œæ•´åŠŸèƒ½ï¼Œä½†æ˜¯æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢ã€‚

æ­å»ºæ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå‘½ä»¤å¦‚ä¸‹

```bash
docker run -d \
    --restart=always \
    --name registry	\
    -p 5000:5000 \
    -v registry-data:/var/lib/registry \
    registry
```

å‘½ä»¤ä¸­æŒ‚è½½äº†ä¸€ä¸ªæ•°æ®å·`registry-data`åˆ°å®¹å™¨å†…çš„`/var/lib/registry` ç›®å½•ï¼Œè¿™æ˜¯ç§æœ‰é•œåƒåº“å­˜æ”¾æ•°æ®çš„ç›®å½•ã€‚

è®¿é—®[http://YourIp:5000/v2/_catalog](http://YourIp:5000/v2/_catalog) å¯ä»¥æŸ¥çœ‹å½“å‰ç§æœ‰é•œåƒæœåŠ¡ä¸­åŒ…å«çš„é•œåƒ

#### å¸¦æœ‰å›¾å½¢åŒ–ç•Œé¢ç‰ˆæœ¬

ä½¿ç”¨`DockerCompose`éƒ¨ç½²å¸¦æœ‰å›¾è±¡ç•Œé¢çš„`DockerRegistry`

```bash
version: '3.0'
services:
  registry:
    image: registry
    volumes:
      - ./registry-data:/var/lib/registry
  ui:
    image: joxit/docker-registry-ui:static
    ports:
      - 8080:80
    environment:
      - REGISTRY_TITLE=æˆ‘çš„ç§æœ‰ä»“åº“
      - REGISTRY_URL=http://registry:5000
    depends_on:
      - registry
```

#### é…ç½®Dockerä¿¡ä»»åœ°å€

æˆ‘ä»¬çš„ç§æœé‡‡ç”¨çš„æ˜¯`http`åè®®ï¼Œé»˜è®¤ä¸è¢«`Docker`ä¿¡ä»»ï¼Œæ‰€ä»¥éœ€è¦åšä¸€ä¸ªé…ç½®ï¼š

```bash
# æ‰“å¼€è¦ä¿®æ”¹çš„æ–‡ä»¶
vi /etc/docker/daemon.json
# æ·»åŠ å†…å®¹ï¼š
"insecure-registries":["http://192.168.150.101:8080"]
# é‡åŠ è½½
systemctl daemon-reload
# é‡å¯docker
systemctl restart docker
```

#### æ¨é€ã€æ‹‰å–é•œåƒ

æ¨é€é•œåƒåˆ°ç§æœ‰é•œåƒæœåŠ¡å¿…é¡»å…ˆ`tag`

â‘  é‡æ–°`tag`æœ¬åœ°é•œåƒï¼Œåç§°å‰ç¼€ä¸ºç§æœ‰ä»“åº“çš„åœ°å€ï¼š192.168.150.101:8080/

```bash
docker tag nginx:latest 192.168.150.101:8080/nginx:1.0 
```

â‘¡ æ¨é€é•œåƒ

```bash
docker push 192.168.150.101:8080/nginx:1.0 
```

â‘¢ æ‹‰å–é•œåƒ

```bash
docker pull 192.168.150.101:8080/nginx:1.0 
```















































